---
layout: single
title: "[Java] 자바 빌드와 실행"
date: "2022-01-01 15:30:10"
categories: Java
tag: [Java, Build, Run]
toc: true
author_profile: true
# sidebar:
#   nav: "docs"
---

## ✔ Goal

- `빌드`와 `실행`에 대해 구분하여 다시 정리해보는 시간을 갖는다
- `Gradle LifeCycle` 정리 (추가적으로 시간을 내서 정리)

## ✔ 들어가기에 앞서

### 이전 회사에서의 배포 프로세스

이전 회사에서는 Eclips 내에서 export를 하여 해당 프로젝트를 `.war`로 떨군 다음에 Linux 서버에 배포를 진행 하였다  
지금 생각해보면 `자동화`보다는 `수동`으로 `배포`를 진행하였고 예상치 못한 상황이 자주 나왔던 것 같다

### 20.06.22 기록 : Live 서버 배포

- 로컬에서 작업이 완료 된 프로젝트 우 클릭 → export → `.war 파일 생성`
- 서버의 Tomcat 버전 및 JDK 버전에 대한 정보를 따라 해당 프로젝트의 환경도 변경
- WinScp → `Storage01` / `tomcat7` / `conf` / `server.xml`에 해당 프로젝트를 위한 환경 추가
- apply 폴더 생성 후 해당 프로젝트의 압축을 해제한다.
- 압축이 해제된 프로젝트를 `Storage01` / `webapps` 경로에 배포 한다.
  - `Putty를 통해 서버 로그 체크`
  - `Tomcat 재시작`
    - 정적 파일인 경우 재 시작이 필요하지 않다

### 빌드 도구가 없는 경우

<img width="700" alt="스크린샷 2021-08-10 20 37 51" src="https://user-images.githubusercontent.com/53969142/128860889-bf1276a4-6065-401c-91a4-9a050999e31b.png">
  
- [참고 자료 : Okky build script](https://okky.kr/article/376623)

## ✔ 빌드 (Build)

```yaml
Build?:
  - "소스 코드 파일"을 "여러 단계의 과정"을 거쳐 컴퓨터에서 실행할 수 있는 "독립 SW 가공물"로 변환시키는 과정
  - 쉽게 말해 개발자가 타이핑한 수천 줄의 코드를 하나의 파일로 만드는 것
```

- 결국 Build를 하는 이유는 세분화 과정을 거쳐 하나의 실행 파일을 만들어 내는 것인데..

### 빌드 과정을 세분화

1. 소스 코드 컴파일
2. **테스트 코드 컴파일**
3. **테스트 코드 실행**
4. **테스트 코드 리포트 작성**
5. 기타 추가 설정 작업 진행
6. **패키징 수행**
7. 최종 SW 결과물(**Artifact**)를 만든다

### 테스트 코드

```yaml
TEST CODE?:
  - 내가 작성한 코드를 자동 테스트해주는 코드를 추가로 작성한 것
  - TDD, JUnit5
```

- 테스트 코드 작성 역시 빌드 과정에 포함이 된다
- 최근 공고들을 보면 테스트 코드 작성은 필수적인 것 같다

### 패키징

- 현업에서 다른 사람들이 만들어 놓은 **오픈 소스**를 사용하는 경우
- Spring Boot 프레임워크를 사용
- 엑셀 다운로드 POI 오픈 소스를 사용
- 우리가 사용한 코드와 `해당 오픈 소스`를 하나로(**`패키징`**) 만든다

### 실행 (Run)

```yaml
Run?:
  - 개발자가 작성한 코드 (혹은 테스트 코드)를 컴파일을 거쳐, 작동시켜 보는 것
  - 독립 SW 가공물이 나올 수도 있고, 나오지 않을 수도 있다
```

- `빌드`와, `실행`을 구분하여 이해한다
- 인터프리터 언어(python, ruby, javascript)
- 컴파일 언어(Java, C#..)

## ✔ 빌드를 수동으로?

<img width="600" height="300" alt="스크린샷 2021-08-10 20 02 48" src="https://user-images.githubusercontent.com/53969142/128855892-df6f1116-44f1-4d3f-b69d-317b91f68e74.png">

- 여러 `복잡한 단계`를 한번에 하는 것은 쉽지가 않다
- `어떤 사람`은 100번 정도 빌드를 해봐서 익숙한 사람이 있는 반면, `신입`의 경우 익숙치 않을 수 있다
- 모든 과정을 수동으로 해야하기 때문에 `리소스 낭비`를 가져온다

### 빌드 툴 (Build tool)

```yaml
Build Tool?:
  - 소스코드의 빌드 과정을 자동으로 처리 해주는 프로그램
  - 외부 소스 코드 (외부 라이브러리) 자동 추가 및 관리
```

- 대표적으로 JAVA에서는 **Maven**, **Gradle**, **Apache Ant**가 존재한다

### Maven

- **`설정을 위해 xml 사용`**
- 외부 라이브러리를 관리할 수 있다 (**pom.xml**)
- **장황한 빌드 스크립트 문제 해결**
- 특정 경우 xml이 복잡해진다
- xml 자체의 한계가 있었다

### Gradle

- **`설정을 위해 groovy 언어를 사용`**
- 외부 라이브러리를 관리할 수 있다
- 유연하게 빌드 스크립트를 작성할 수 있다
- 캐싱이 잘되어 성능이 뛰어나다

### 정리

- `빌드`란 단순히 `실행`하는 것과 다르다
- `빌드 과정 자동화`와 `외부 라이브러리 관리`를 위해 `빌드 툴`이 사용된다
- 대표적으로 `Maven`, `Gradle`

### 참고 자료

- [빌드와 실행](https://www.youtube.com/watch?v=L19wXSpv5cs)
- [BuildTool - Groovy란?](https://galid1.tistory.com/647)
- [Gradle을 위한 살짝 Groovy](https://goodteacher.tistory.com/333)
- [Tomcat war 파일 배포](https://its-easy.tistory.com/4)
