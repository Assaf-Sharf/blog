---
layout : single
title : Spring 게시판 만들기(26)
categories: Spring
tags: [SPRING]
toc:  true
toc_icon: "bars"
toc_sticky: true
author_profile: true
sidebar:
  nav: "docs"
---

> ### Spring 게시판 댓글 수 추가하기

1. tbl_Board에 SQL 컬럼 추가 : REPLYCNT

2. BoardVO 추가

~~~java
private int replycnt;
~~~

3. BoardMapper.xml에 추가 -> id = getListWithPaging

4. list.jsp에 폼에 넣기 -> [${board.replycnt }]

5. - 테이블 기준으로 하면 BoardMapper에 해서 ReplyServiceImpl에서 새로 받아서 해도된다

   - 하지만 받아오지 않으려면 ReplyMapper에서 ReplyServiceImpl에서 바로 받아도 된다

xml 구문 tbl_board에서 bno값 즉, 글목록 번호가 같은 곳에 댓글이 써지면 1씩 추가한다는 SQL 구문

~~~xml
<update id="replyCountUpdate">
    update tbl_board set replycnt = replycnt + 1 where bno = #{bno}
</update>
~~~

ReplyMapper에 넣기

~~~java
void replyCountUpdate(Long bno);
~~~

ReplyServiceImpl에 구현

**@Transactional 넣어주기**

~~~java
@Transactional
@Override
public int insert(ReplyVO vo) {

    // 게시판의 댓글개수 가져오기
    mapper.replyCountUpdate(vo.getBno());

    return mapper.insert(vo);
}
~~~

**Service에서 컨트롤러 연결은 이미 만들어진 insert구문에 넣었기 때문에 따로 작업은 필요없다**

