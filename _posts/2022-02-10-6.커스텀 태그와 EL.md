---
layout: single
published: true
title:  "6.커스텀 태그와 EL"
categories : Jsp
tag : ["java","servlet"]
toc : true
toc_sticky: true
author_profile: true
sidebar :
    nav : "docs"
---



## 커스텀 태그란?

+ 스크립트릿 사용을 줄이고 태그와 같은 형태로 프로그램의 대체 

+ 재활용 가능한 구조를 통해 태그 라이브러리로 활용 가능하고자 개발하고자 함

+ 서블릿으로 전환 시 자바코드로 변경됨

+ taglib 지시어를 사용하여 태그가 어디에 정의되어있는지 선언 후 태그에 사용할 접두어를 지정한다. 

  <p style ="color:red"> JSTL </p>
  
  -  커스텀 태그를 기반으로 하는 것
  
  - JSTL : JSP Standard Tag Library(태그 라이브러리)
  
  <p style ="color:red; font-size:0.7em"> < jsp:useBean >< jsp:setProperty >액션 역시커스텀 태그로 jsp에 기본적으로 포함되어 있어 표준 액션태그라고 부른다. <br/>
  taglib 지시어 없이 사용가능한 커스텀 태그!
  
  
  

## EL이란?

- 표현언어라고 하며 자바 빈 객체에 접근하여 손쉽게 변수/객체를 참조할 수 있음

- 메서드 호출이 가능함

- 사칙연산, 비교연산, 논리연산, 3항 연산 등을 지원 

- 데이터가 없거나 null객체를 참조할 때 에러가 발생하지 않음 

- ${저장이름.변수명}

- ${myList[0]} // 배열인 경우

- ${myMap["name"]} //맵인 경우

- EL은 모든 scope object에서 자바 빈 객체를 찾으며, 특정 scope만을 대상으로 참조하려면 

  *내장객체명Scope.속성이름* 으로 사용함 

  <p style = "color:red"> scope object에 속성으로 저장된 것이 아니라 
      request의 파라미터로 전달된 값인 경우에는 <br/>
      - request.getParameter("uname")<br/>
      - ${param.uname}<br/>
      식으로 사용



## JSTL

- 커스텀태그 라이브러리 



### 라이브러리 설치

1. https://tomcat.apache.org/download-taglibs.cgi 에 접속

2. < Impl> , < Spec > 을 클릭하여 다운로드 

3. 다운로드한 파일을 [webapp] -> [WEB-INF]->[lib]폴더에 복사하여 넣어준다.

4. taglib 지시어를 추가해아한다. core라이브러리를 사용한다 

   

   ```
   <%@taglib perfix="c" uri="http://java.sun.com/jsp/jstl/core" %>
   ```



### core 라이브러리란?

- 변수 처리 , 흐름 제어, URL 관리, 출력 등 기본적인 기능을 구현해둔 라이브러리

  | 기능      | 태그                                         | 설명                     |
  | --------- | -------------------------------------------- | ------------------------ |
  | 변수      | set, remove                                  | 변수 지정과 삭제         |
  | 흐름 제어 | if, choose, when,otherwise,forEach,forTokens | 조건 처리, 반복,토큰파싱 |
  | URL 관리  | import,redirect,url,param                    | url 핸들링               |
  | 기타      | catch,out                                    | 에러 처리, 출력          |

  

### c:set

- scope 객체에 setAttribute()메서드를 사용하는 것과 같음.

- 기본적으로 문자열 형태로 저장하지만 EL을 사용할 경우 배열 객체도 저장 가능 $([ 1,2,3 ])

- target 속성으로 특정 타입의 객체에 setter 메서드를 통한 속성 저장도 가능함 

  ```
  <h3>c:set</h3>
  
  <c:set var="product1" value="애플아이폰"></c:set>
  <c:set var="product2" value="삼성 갤럭시 노트"></c:set>
  <c:set var="intArray" value="${[1,2,3,4]}"></c:set>
  ```

  - page scope에 문자열 product1,2을 저장
  - page scope에 EL을 이용하여 배열 intArray을 저장



### c:out

- 출력을 위한 태그

- 대부분 EL로 대체됨 

  ``` 
  <h3>c:out</h3>
  
  <p>product1:jstl</p>
  <c:out value="${product1}" default="not registered" escapeXml="true"></c:out>
  <p>product2:jstl</p>
  <c:out value="${product2}" default="not registered" escapeXml="true"></c:out>
  
  <p>intArray[2]:el</p>
  ${intArray[2]}
  
  <p>product2:el</p>
  ${product2}
  ```

  - default : 출력하고자하는 객체가 없을 때 출력할 값
  - escapeXml : true인 경우 태그를 일반 문자열로 처리



### c:forEach

```
<h3>c:foreach 배열출력</h3>

<ul>
	<c:forEach var="num" varStatus="i" items="${intArray}">
		<li>${i.index} : ${num}</li>
	</c:forEach>
</ul>
```

- {i.index} : index = 0부터 반복을 시작함 
- {i.index} : count = 1부터 반복을 시작함
-  intArray의 배열의 원소를 하나씩 꺼내서 num변수로 가져옴 



### c:if

```
<h3>c:if</h3>

<c:set var="checkout" value="false"></c:set>
<c:if test="${checkout}">
	<p>주문제품 : ${product2}</p>
</c:if>

<c:if test="${!checkout}">
	<p>주문제품이 아님!</p>
</c:if>

<c:if test="${!empty product2}">
	<p>${product2} 이미 추가됨</p>
</c:if>
```

- if 조건문 마다 실행



### c:choose,when,otherwise

``` 
<h3>c:choose,when,otherwise</h3>

<c:choose>
	<c:when test="${checkout}">
		<p>주문제품 : ${product2}</p>
	</c:when>
	<c:otherwise>
		<p>주문제품이 아님!</p>
	</c:otherwise>
</c:choose
```

- if ~ else if 혹은 switch 문과 같은 형식



### forTokens

- 출력할 문자열이 구분자(delims 속성값)로 분리되었을 때 모든 값을 반복해서 출력

```
<c:forTokens var="city" items="Seoul | Tokyo | New YORK | Toronto" delims="|" varStatus="i">
	<c:if test="${i.first}">도시목록</c:if>
	${city}
	<c:if test="${!i.last}">,</c:if>
</c:forTokens>
```



