## 데이터 수집 방법
 - 웹 크롤링

   -크롤링의 최종 목표 : 웹 데이터를 DataFrame으로 변환

   -데이터 요청 시 , (XML, JSON) 으로 응답. 상대적으로 JSON이 수월하다.
    + JSON이 되는지 확인

      
    
 - API활용 :  매일 업데이트 되는 데이터
   
    - 일괄처리 함수 만들기
    - 자동적용
    - 배치처리
    - 윈도우 - 스케줄러 / 리눅스 - Crontab 설정)
    - 해당 스크립트 (처리.py)가 정해진 시간에 코드에 돌아감
    - 전제 조건: 서버가 살아있으면, 윈도우 기준, Desktop 계속 on

### 목표 : 부동산 데이터 수집 
 + [서울시 빅데이터 플랫폼](https://bigdata.seoul.go.kr/noti/selectPageListTabNoti.do?r_id=P260) 
 + [공공데이터 포털](https://www.data.go.kr/)
 + [서울 열린 데이터 광장](https://data.seoul.go.kr/dataList/OA-21275/S/1/datasetView.do)
 + [도서관 정보나루](https://www.data4library.kr/)

 + [전자공시시스템](https://dart.fss.or.kr/)



## 파이썬으로 API 호출하기


[requests 라이브러리](https://requests.readthedocs.io/en/latest/)


```python
import requests
```


```python
url = "http://data4library.kr/api/loanItemSrch?format=json&startDt=2021-04-01&endDt=2021-04-30&age=20&authKey=0e98f911e8ee7a8c26c0b173ccc1e0300fed0303880b0f3c56554663524a97ab"
```


```python
r = requests.get(url)
```


```python
data = r.json()
#print(data)
```


```python
#data['response']['docs']
```


```python
pd.json_normalize(pd.DataFrame(data['response']['docs'])['doc'])
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>no</th>
      <th>ranking</th>
      <th>bookname</th>
      <th>authors</th>
      <th>publisher</th>
      <th>publication_year</th>
      <th>isbn13</th>
      <th>addition_symbol</th>
      <th>vol</th>
      <th>class_no</th>
      <th>class_nm</th>
      <th>loan_count</th>
      <th>bookImageURL</th>
      <th>bookDtlUrl</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>우리가 빛의 속도로 갈 수 없다면 :김초엽 소설</td>
      <td>지은이: 김초엽</td>
      <td>허블</td>
      <td>2019</td>
      <td>9791190090018</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>488</td>
      <td>https://image.aladin.co.kr/product/19359/16/co...</td>
      <td>https://data4library.kr/bookV?seq=5430429</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2</td>
      <td>달러구트 꿈 백화점 :이미예 장편소설</td>
      <td>지은이: 이미예</td>
      <td>팩토리나인</td>
      <td>2020</td>
      <td>9791165341909</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>408</td>
      <td>https://image.aladin.co.kr/product/24512/70/co...</td>
      <td>https://data4library.kr/bookV?seq=5707051</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>3</td>
      <td>지구에서 한아뿐 :정세랑 장편소설</td>
      <td>지은이: 정세랑</td>
      <td>난다</td>
      <td>2019</td>
      <td>9791188862290</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>397</td>
      <td>https://image.aladin.co.kr/product/19804/82/co...</td>
      <td>https://data4library.kr/bookV?seq=5446546</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>4</td>
      <td>시선으로부터, :정세랑 장편소설</td>
      <td>지은이: 정세랑</td>
      <td>문학동네</td>
      <td>2020</td>
      <td>9788954672214</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>393</td>
      <td>https://image.aladin.co.kr/product/24131/37/co...</td>
      <td>https://data4library.kr/bookV?seq=5674475</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>5</td>
      <td>아몬드손원평 장편소설</td>
      <td>손원평</td>
      <td>창비</td>
      <td>2017</td>
      <td>9788936434267</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>391</td>
      <td>http://image.aladin.co.kr/product/16839/4/cove...</td>
      <td>https://data4library.kr/bookV?seq=3423096</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>195</th>
      <td>196</td>
      <td>194</td>
      <td>열두 발자국</td>
      <td>지은이: 정재승</td>
      <td>어크로스</td>
      <td>2018</td>
      <td>9791160560510</td>
      <td>03400</td>
      <td></td>
      <td>404</td>
      <td>자연과학 &gt; 자연과학 &gt; 강연집, 수필집, 연설문집</td>
      <td>80</td>
      <td>https://image.aladin.co.kr/product/15072/28/co...</td>
      <td>https://data4library.kr/bookV?seq=3767852</td>
    </tr>
    <tr>
      <th>196</th>
      <td>197</td>
      <td>197</td>
      <td>죽음 :베르나르 베르베르 장편소설</td>
      <td>지은이: 베르나르 베르베르 ;옮긴이: 전미연</td>
      <td>열린책들</td>
      <td>2019</td>
      <td>9788932919676</td>
      <td>04860</td>
      <td>1</td>
      <td>863</td>
      <td>문학 &gt; 프랑스문학 &gt; 소설</td>
      <td>79</td>
      <td>https://image.aladin.co.kr/product/19183/62/co...</td>
      <td>https://data4library.kr/bookV?seq=5408151</td>
    </tr>
    <tr>
      <th>197</th>
      <td>198</td>
      <td>197</td>
      <td>심판</td>
      <td>베르나르 베르베르 지음 ;전미연 옮김</td>
      <td>열린책들</td>
      <td>2020</td>
      <td>9788932920405</td>
      <td>03860</td>
      <td></td>
      <td>862</td>
      <td>문학 &gt; 프랑스문학 &gt; 희곡</td>
      <td>79</td>
      <td>https://image.aladin.co.kr/product/24919/70/co...</td>
      <td>https://data4library.kr/bookV?seq=5738734</td>
    </tr>
    <tr>
      <th>198</th>
      <td>199</td>
      <td>197</td>
      <td>어떤 죽음이 삶에게 말했다 :생의 남은 시간이 우리에게 들려주는 것</td>
      <td>김범석 지음</td>
      <td>흐름출판</td>
      <td>2021</td>
      <td>9788965964230</td>
      <td>03810</td>
      <td></td>
      <td>814.7</td>
      <td>문학 &gt; 한국문학 &gt; 수필</td>
      <td>79</td>
      <td>https://image.aladin.co.kr/product/26120/62/co...</td>
      <td>https://data4library.kr/bookV?seq=5850509</td>
    </tr>
    <tr>
      <th>199</th>
      <td>200</td>
      <td>197</td>
      <td>지적 대화를 위한 넓고 얕은 지식</td>
      <td>채사장 지음</td>
      <td>한빛비즈</td>
      <td>2014</td>
      <td>9788994120966</td>
      <td>13100</td>
      <td>1</td>
      <td>001.3</td>
      <td>총류 &gt; 총류 &gt; 지식, 학문 일반</td>
      <td>79</td>
      <td>https://bookthumb-phinf.pstatic.net/cover/084/...</td>
      <td>https://data4library.kr/bookV?seq=2396928</td>
    </tr>
  </tbody>
</table>
<p>200 rows × 14 columns</p>
</div>



## 검색 결과 페이지 가져오기


```python
import gdown
gdown.download('https://bit.ly/3q9SZix', '20s_best_book.json', quiet=False)
```

    Downloading...
    From: https://bit.ly/3q9SZix
    To: C:\Users\user\Desktop\han-toss\20s_best_book.json
    100%|██████████| 92.9k/92.9k [00:00<00:00, 1.09MB/s]
    




    '20s_best_book.json'




```python
import pandas as pd

books_df = pd.read_json('20s_best_book.json')

books_df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>no</th>
      <th>ranking</th>
      <th>bookname</th>
      <th>authors</th>
      <th>publisher</th>
      <th>publication_year</th>
      <th>isbn13</th>
      <th>addition_symbol</th>
      <th>vol</th>
      <th>class_no</th>
      <th>class_nm</th>
      <th>loan_count</th>
      <th>bookImageURL</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>우리가 빛의 속도로 갈 수 없다면 :김초엽 소설</td>
      <td>지은이: 김초엽</td>
      <td>허블</td>
      <td>2019</td>
      <td>9791190090018</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>461</td>
      <td>https://image.aladin.co.kr/product/19359/16/co...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2</td>
      <td>달러구트 꿈 백화점.이미예 장편소설</td>
      <td>지은이: 이미예</td>
      <td>팩토리나인</td>
      <td>2020</td>
      <td>9791165341909</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>387</td>
      <td>https://image.aladin.co.kr/product/24512/70/co...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>3</td>
      <td>지구에서 한아뿐 :정세랑 장편소설</td>
      <td>지은이: 정세랑</td>
      <td>난다</td>
      <td>2019</td>
      <td>9791188862290</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>383</td>
      <td>https://image.aladin.co.kr/product/19804/82/co...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>4</td>
      <td>시선으로부터, :정세랑 장편소설</td>
      <td>지은이: 정세랑</td>
      <td>문학동네</td>
      <td>2020</td>
      <td>9788954672214</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>370</td>
      <td>https://image.aladin.co.kr/product/24131/37/co...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>5</td>
      <td>아몬드 :손원평 장편소설</td>
      <td>지은이: 손원평</td>
      <td>창비</td>
      <td>2017</td>
      <td>9788936434267</td>
      <td>03810</td>
      <td></td>
      <td>813.7</td>
      <td>문학 &gt; 한국문학 &gt; 소설</td>
      <td>365</td>
      <td>http://image.aladin.co.kr/product/16839/4/cove...</td>
    </tr>
  </tbody>
</table>
</div>




```python
type(books_df)
```




    pandas.core.frame.DataFrame



### yes24에서 isbn으로 책 검색하기 


```python
import requests

isbn = 9791190090018      # '우리가 빛의 속도로 갈 수 없다면'의 ISBN
url = 'http://www.yes24.com/Product/Search?domain=BOOK&query={}'


r = requests.get(url.format(isbn))
```

1. requests 라이브러리 실행 (라이브러리 설치 : pip install requests)

2. url 주소 맨 끝 딕셔너리{}부분 query={}에 (isbn)코드 삽입
     - (url은 문자열 형식의 웹 주소이며, isbn은 국제 표준 도서 번호.)
  
       

3. query={} 가 없다면 **BeautifulSoup , [scrapy](https://scrapy.org/)** 사용
       

4. **r = requests.get(url.format(isbn))**

                    url.format(isbn)은 isbn 값을 URL에 삽입

웹 서버가 GET 요청을 허용하고, 요청한 URL에서 데이터를 제공해야 한다.

이러한 조건들이 충족되면, r 변수에는 웹 서버의 응답이 저장된다. 이후 r.text 또는 r.json() 등을 사용하여 응답 내용을 확인할 수 있다. 이 코드는 주로 웹 스크래핑이나 API 호출에 사용된다.

### requests 와 BeautifulSoup


```python
from bs4 import BeautifulSoup
```


```python
#웹 페이지 가져오기
url = "https://www.amazon.com/Paradise-Lost-Penguin-Classics-Milton/dp/0140424393"
response = requests.get(url)
```


```python
# BeautifulSoup 객체 생성
soup = BeautifulSoup(response.text, 'html.parser')
```


```python
prd_link = soup.find('a', attrs={'class':'gd_name'})
```

HTML 문서(soup)에서 <a> 태그 중 class 속성 값이 'gd_name'인 첫 번째 태그만 반환


```python
print(prd_link)
```

    None
    


```python
title = soup.find('title')
print(title.string) 
```

    
          503 - Service Unavailable Error
    

## 연습
나는 존 밀턴 <실낙원>을 해보겠다. 도서 구입 사이트 책 정보에 isin 나와있다.    



```python
import requests

isbn = 8944785325
url ='http://www.yes24.com/Product/Search?domain=BOOK&query={}'

r = requests.get(url.format(isbn))
```


```python
#print(r.text) 
#주석을 풀어서 실행해보면 정상적으로 출력된다. 너무 길어서 생략//
```

## lambda vs udf (사용자 정의 함수)
- lambda는 1회성 함수로만 쓰겠다.
- udf는 저장을 해서 다른 곳에서도 쓰겠다!

## [merge()](https://pandas.pydata.org/docs/reference/api/pandas.merge.html) 함수의 매개변수

p.146
데이터프레임이나 이름이 지정된 시리즈 객체를 **데이터베이스** 스타일로 결합한다. (데이터 프레임 + 데이터 프레임 / 데이터 프레임 + 시리즈)

이름이 지정된 시리즈 객체는 하나의 이름이 지정된 열이 있는 데이터프레임으로 처리된다.

이 결합은 열이나 인덱스를 기준으로 수행된다. 만약 열을 열에 결합하는 경우, 데이터프레임의 인덱스는 무시된다. 그렇지 않고 인덱스를 인덱스에, 또는 인덱스를 열이나 열에 결합하는 경우, 인덱스는 유지된다. 크로스 병합을 수행할 때는 병합할 열의 사양이 허용되지 않는다.

두 객체의 인덱스를 기준으로 합칠 경우 left_index와 right_index 매개변수를 True로 지정한다.
데이터 프레임이나 시리즈 객체를 합칠 때는 **매개변수**에 합칠 기준을 다양하게 지정한다.니다.니다.



### on 매개변수 : lable or list

합칠 때 기준이 되는 열을 지정. 이 열은 두 데이터프레임에 모두 존재해야 한다.
 **pd.merge(df1, df2, on = 'clo1')**

### how 매개변수 {‘left’, ‘right’, ‘outer’, ‘inner’, ‘cross’}, default ‘inner’

- 합쳐질 방식을 지정한다. 기본값은 **'inner'** 
how 매개변수를 생략하면 기본적으로 두 데이터프레임의 값이 같은 행만 합쳐진다.다.



**left** : 왼쪽 프레임(첫 번째)의 키를 기준으로, SQL의 왼쪽 외부 조인과 유사하다. 키 순서는 유지된다.


```python
pd.merge(df1, df2, how='left', on='col1')
```

**right** : 오른쪽 프레임(두 번째)의 키만 사용하며, SQL의 오른쪽 외부 조인과 유사하다. 키 순서는 유지된다.


```python
pd.merge(df1, df2, how='right' , on='col1')
```

**outer** : 두 프레임의 키들의 합집합 (두 데이터프레임의 모든 행을 유지)을 사용하며, SQL의 완전 외부 조인과 유사하다. 키들은 사전식으로 정렬된다.


```python
pd.merge(df1, df2, how='outer' , on='col1')
```

**inner** : 두 프레임의 키들의 교집합을 사용하며, SQL의 내부 조인과 유사하다.왼쪽 키의 순서는 유지된다.

**cross** : 두 프레임의 카르테지안 곱을 생성하며, 왼쪽 키의 순서는 유지된다.

## Groupby
**grouped = df.groupby(['column1', 'column2'])**


[DataFrame.groupby](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby)

[Series.groupby](https://pandas.pydata.org/docs/reference/api/pandas.Series.groupby.html#pandas.Series.groupby)

 - 데이터셋.groupby(컬럼명).집계함수
   + 해당 컬럼은 범주 형태
 - 포인트 1. 데이터 형태가 바뀜
   + 추가적인 조작
   


```python
import seaborn as sns 

tips = sns.load_dataset("tips")
tips.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>




```python
#남자와 여자 누가 팁을 더 많이 줄까요??
tips.groupby('sex', observed=True)['tip'].mean()
```




    sex
    Male      3.089618
    Female    2.833448
    Name: tip, dtype: float64




```python
tips.groupby('sex', observed=True)['tip'].mean().reset_index()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sex</th>
      <th>tip</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Male</td>
      <td>3.089618</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Female</td>
      <td>2.833448</td>
    </tr>
  </tbody>
</table>
</div>




```python
result = tips.groupby(['sex', 'day', 'smoker'], observed=True)['tip'].mean()
result.reset_index()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sex</th>
      <th>day</th>
      <th>smoker</th>
      <th>tip</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Male</td>
      <td>Thur</td>
      <td>Yes</td>
      <td>3.058000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Male</td>
      <td>Thur</td>
      <td>No</td>
      <td>2.941500</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Male</td>
      <td>Fri</td>
      <td>Yes</td>
      <td>2.741250</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Male</td>
      <td>Fri</td>
      <td>No</td>
      <td>2.500000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Male</td>
      <td>Sat</td>
      <td>Yes</td>
      <td>2.879259</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Male</td>
      <td>Sat</td>
      <td>No</td>
      <td>3.256563</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Male</td>
      <td>Sun</td>
      <td>Yes</td>
      <td>3.521333</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Male</td>
      <td>Sun</td>
      <td>No</td>
      <td>3.115349</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Female</td>
      <td>Thur</td>
      <td>Yes</td>
      <td>2.990000</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Female</td>
      <td>Thur</td>
      <td>No</td>
      <td>2.459600</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Female</td>
      <td>Fri</td>
      <td>Yes</td>
      <td>2.682857</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Female</td>
      <td>Fri</td>
      <td>No</td>
      <td>3.125000</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Female</td>
      <td>Sat</td>
      <td>Yes</td>
      <td>2.868667</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Female</td>
      <td>Sat</td>
      <td>No</td>
      <td>2.724615</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Female</td>
      <td>Sun</td>
      <td>Yes</td>
      <td>3.500000</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Female</td>
      <td>Sun</td>
      <td>No</td>
      <td>3.329286</td>
    </tr>
  </tbody>
</table>
</div>




```python
tips.groupby('sex', observed=True)['tip'].agg(['mean', 'std', 'max', 'min'])
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>std</th>
      <th>max</th>
      <th>min</th>
    </tr>
    <tr>
      <th>sex</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Male</th>
      <td>3.089618</td>
      <td>1.489102</td>
      <td>10.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Female</th>
      <td>2.833448</td>
      <td>1.159495</td>
      <td>6.5</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
tips.groupby('sex', observed=True)['tip'].agg(['mean', 'std', 'max', 'min']).reset_index()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sex</th>
      <th>mean</th>
      <th>std</th>
      <th>max</th>
      <th>min</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Male</td>
      <td>3.089618</td>
      <td>1.489102</td>
      <td>10.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Female</td>
      <td>2.833448</td>
      <td>1.159495</td>
      <td>6.5</td>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
tips.groupby('sex', observed=True).size().reset_index() # 각 행의 갯수
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sex</th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Male</td>
      <td>157</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Female</td>
      <td>87</td>
    </tr>
  </tbody>
</table>
</div>




```python

```
