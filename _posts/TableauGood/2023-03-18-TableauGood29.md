---
layout: single
title:  "범위형 매개 변수 만들기"
categories: Tableau
tag: [Tableau]
toc: true
---

## 범위형 매개 변수

데이터는 시간에 따라 변하기 때문에 상수 값을 동적으로 바꿔줘야 한다. 이번 파트는 상수 값을 동적인 값으로 변경해주는 매개 변수를 만들어 보겠다.
**매개 변수**는 혼자서 쓰일 수 없고, 반드시 계산된 필드, 필터 또는 참조선하고 엮일 때만 화면을 동적인 값으로 변경해주는 기능이다. 

## 범위형 매개 변수 만들기

측정값에 있는 [매출]을 열선반에 차원에 있는 [제품 중분류]를 행선반에 올려준다. 제품 중분류를 매출 합계 기준으로 내림차순 정렬해주고 측정값에 있는 [매출]을 <레이블>마크에 올려준다.

![image](https://user-images.githubusercontent.com/100071667/226109901-e68a0bd7-e96c-4d1d-baac-07ac9edf602a.png)

아래의 화면은 매개 변수 컨트롤러에서 이동할 수 있는 범위가 5천만에서 5억 사이인데 슬라이더를 한 칸씩 누를 때마다 5천만씩 이동한다는 뜻이다.

![image](https://user-images.githubusercontent.com/100071667/226110086-2daa8125-db62-402d-a571-3f433630b18b.png)

좌측 사이드 바의 측정값 영역 하단에 매개 변수 영역이 생기면서 'p_매출 기준 선택'이라는 매개 변수가 생긴다. 이 매개 변수를 우클릭 후 '매개 변수 컨트롤 표시'를 선택하면 뷰 우측에 변수 컨트롤러가 나타난다. 
그런데 이 매개 변수의 컨트롤러에 있는 슬라이더를 움직여도 뷰에는 아무런 변화가 없는데 이유는 매개 변수는 혼자서 쓰일 수 없기 때문이다.

![image](https://user-images.githubusercontent.com/100071667/226110187-b3cf9662-477d-4d47-837c-cf8abeea9d23.png)

'계산된 필드 만들기'를 통해 아래와 같은 식을 만들어준다.

![image](https://user-images.githubusercontent.com/100071667/226110335-00f8fb58-6aef-4836-96ff-ec7732fc5ef4.png)

위의 식에 따라 기준을 충족하면 TURE, 값을 충족하지 못하면 FALSE를 반환하게 된다. 매개 변수 컨트롤러의 슬라이더를 이용해 동적으로 움직여보면 매개 변수의 값에 따라 색상 마크가 달라지게 된다.

![image](https://user-images.githubusercontent.com/100071667/226110573-2eea5092-b9f9-4f2d-983e-686cbbe37480.png)

![image](https://user-images.githubusercontent.com/100071667/226110594-77e28be8-e9a4-4d54-8646-dbeacb2d40ff.png)

하단에 '매출'이라는 축을 우클릭 후 '참조선 추가'를 선택하여 아래와 같이 작성해준다.

![image](https://user-images.githubusercontent.com/100071667/226110763-c76168b9-9bda-48a0-a410-330639f8611c.png)

마지막으로 뷰에 나오는 숫자의 단위를 모두 백만 단위로 변경해준다. 하단의 축이 현재 백만 단위로 되어 있기에 막대 차트에 나오는 합계 매출에 대한 레이블의 서식과 매개 변수의 서식도 백만 단위로 변경해보겠습니다.

마크에서 레이블로 되어 있는 [합계(매출)]을 우클릭 후 서식을 선택해 기본값의 숫자에서 숫자(사용자 지정)을 선택하고 디스플레이 장치를 백만으로 설정해준다.

![image](https://user-images.githubusercontent.com/100071667/226110948-5f24575c-d87c-4199-afbc-34b5e55225c6.png)

매개 변수의 서식도 변경해줘 매개 변수와 연계된 매개 변수 컨트롤러와 참조선이 모두 해당 서식 기준으로 변경되는 것을 확인할 수 있다.

![image](https://user-images.githubusercontent.com/100071667/226111097-3471141f-7a31-41e2-9d6b-1cd9325106ea.png)