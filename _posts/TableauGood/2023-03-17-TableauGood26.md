---
layout: single
title:  "퀵 테이블 계산 - 2(순위,백분위수,이동 평균)"
categories: Tableau
tag: [Tableau]
toc: true
---

## (5) 순위(Rank)

구성 비율에서 사용한 시트를 그대로 사용해 측정값에 있는 [매출]을 더블 클릭 해준다.
[합계(매출)]을 기준으로 매출에 대한 순위를 표시하기 위해 퀵테이블 계산에서 '순위'를 선택해준다.

![image](https://user-images.githubusercontent.com/100071667/225802056-551e2059-d5ec-41d9-b7fb-8c8174a0bf11.png)

같은 제품 대분류 안에서 매출에 대한 순위를 표시하기 위해 측정값 카드에 있는 첫번째 [합계(매출)]의 '퀵 테이블 계산 편집'을 누른 후 '특정 차원'에서 '제품 대분류'를 체크 해제하면 같은 제품 대분류 내 제품 중분류들의 매출에 대한 순위를 표시할 수 있다.

![image](https://user-images.githubusercontent.com/100071667/225802359-561af8ec-9bb3-49bd-b178-30ab4e02d156.png)

제품 중분류의 순위가 실수로 표현이 되고 있는데 '1위'와 같이 보이기 위해 첫번째 [합계(매출)]의 서식에서 '사용자 지정'을 통해 "#위"로 변경해준다.

![image](https://user-images.githubusercontent.com/100071667/225802902-00a6fa7f-5f06-43a6-a885-96a8eeaa92ab.png)

매출 합계를 테이블 맨 앞에 표시하기 위해, 측정값에 있는 [매출]을 드래그해서 측정값카드의 맨 위에 배치시키면 된다.

![image](https://user-images.githubusercontent.com/100071667/225803249-489b94e2-574f-4242-bf0f-0214a31160fc.png)

컬럼명을 변경해주기 위해 두번째 측정값에 있는 [합계(매출)]을 ctrl키를 누른 상태로 옆 사이드 바로 드래그 앤드 드롭해줍니다. 그러면 계산1이란 필드가 복제된다. 계산1을 우클릭 후 편집을 선택하여 밑에와 같이 작성해준다. 세번째 측정값에 있는 [합계(매출)]도 동일하게 작성해주면 된다.

![image](https://user-images.githubusercontent.com/100071667/225803678-dd8756d6-61b6-4057-adec-95be4a4f3090.png)

![image](https://user-images.githubusercontent.com/100071667/225803753-bdfd64e9-fe7f-40be-838d-ca1a788de430.png)


![image](https://user-images.githubusercontent.com/100071667/225803948-6b9ce5c5-18e5-4f13-968b-5e4202266ee2.png)


## (6) 백분위수(Percentile)

[고객명]필드를 행선반에 올리고 측정값에 있는 [매출]을 더블 클릭해준다. 테이블 위의 '고객명'이라는 필드 레이블에 마우스 오버하면 나타나는 아래 세모옵션[▼]을 선택한 다음 필드>'합계(매출)'을 선택해준다.
그러면 매출에 따라 고객명이 내림차순 정렬이 된다.

![image](https://user-images.githubusercontent.com/100071667/225862716-3bb07768-f2a2-4d83-a468-e60dffe5270a.png)

마크에서 텍스트로 되어 있는 [합계(매출)]을 우클릭 후 퀵 테이블 계산에서 '백분위수'를 선택해준다. 그러면 전체 고객들 중 매출을 가장 많이 기록한 고객은 100%, 매출이 가장 적은 고객은 0%로 나온다.

![image](https://user-images.githubusercontent.com/100071667/225863548-a5d35a1f-06c6-4002-ab20-316fc40ae404.png)

반대로 백분위수를 큰 값을 0%, 작은 값을 100%로 변경하기 위해서는 마크에서 텍스트로 되어 있는 [합계(매출)]을 우클릭 후 '퀵 테이블 계산 편집 선택 후, 디폴트로 '오름차순'으로 되어 있는 것을 '내림차순'으로 변경하면 된다.

![image](https://user-images.githubusercontent.com/100071667/225863871-ec431bc5-8376-415f-8b1b-92317fd67b80.png)


## (7) 이동 평균(Moving Average)

측정값에 있는 [매출]을 행선반에 올리고 차원에 있는 [주문 일자]를 우클릭과 함께 열선반에 올려 초록색 연속형[분기(주문 일자)]를 선택해 준다. 행선반에 있는 [합계(매출)]을 '퀵 테이블 계산'에서 **이동 평균**을 선택해줘 라인 그래프가 매출 합계가 아닌 매출 합계를 기준으로 이동 평균한 값으로 라인 그래프가 표시된다.

![image](https://user-images.githubusercontent.com/100071667/225864674-6feeee21-34b8-438e-88bf-6b86806764ea.png)

이동 평균으로 변경한 값을 검증하기 위해 측정값에 있는 [매출]을 드래그해서 라인 그래프 왼쪽 축에 'ㅣㅣ'가 생겼을 때 놓으면 결합된 축이 만들어진다.

![image](https://user-images.githubusercontent.com/100071667/225865776-22dc0624-a361-4049-bbdd-4260333ca0d5.png)

우측에 있는 '측정값 이름'이라는 색상 범례를 보면 둘 다 매출에서 출발했기 때문에 비슷한 색깔로 나와서 구분이 되지 않아 색상을 바꿔보겠다. 이동 평균을 나타낸 '테이블 (옆으로) 기준으로'로 되어 있는 색상을 더블 클릭하여 기본 색상에서 노란색을 선택하고 확인해준다.

![image](https://user-images.githubusercontent.com/100071667/225866634-2a99b43e-0d09-488d-8b46-b2097f0900dc.png)