---
layout: single
published: true
title:  "12.리스너와 필터"
categories : Jsp
tag : ["java","jsp"]
toc : true
toc_sticky: true
author_profile: true
sidebar :
    nav : "docs"
---



## 리스너

### 리스너란?

- 웹 애플리케이션 실행에 필요한 정보를 제공하거나 , 톰캣의 시작과 종료 같은 특정 상황에 자동으로 동작하는 프로그램을 구현 할 때 사용된다.

- 별도 실행 과정이 없고 톰캣에 의해 자동으로 실행된다.

  - 리스너의 대표적 활용 예

    - 1.초기화 매개변수와 이동 : 톰캣이 시작 될 때 'web.xml'의 ServletContext 초기화 매개변수를 읽어 그에 따라 특정 객체를 초기화한 후 서블릿이나 JSP에 전달한다.
    - 2.예제 프로그램 등을 배포할 때 샘플 데이터 제공 : 미리 데이터베이스를 연결을 만들어줌
    - 3.복잡한 환경 설정 제공: 서버 환경에 따라 변하는 여러 정보(DB, 관리자 계정 정보 등)를 파일로 부터 읽어봐서 JSP 및 서블릿 등에 제공한다.
    - 4.특정 이벤트에 동작하는 기능 구현 웹 애플리케이션을 실행할 때 함께 동작해야하는 외부 프로그램이나 서비스 동작 유무를 확인하고 자동으로 실행시켜준다.

  - 리스너의 종류

    | 유형                         | 설명                                                         | 리스너 인터페이스                                       |
    | ---------------------------- | ------------------------------------------------------------ | ------------------------------------------------------- |
    | ServletContext 생명주기 변화 | 대표적인 리스너 이벤트, 보통 톰캣의 시작 및 종료 시점과 일치함 | javax.servlet.ServletContextListener                    |
    | ServletContext 속성 변화     | ServletContext의 속성이 추가되거나 변경되는 상황에 동작함    | javax.servlet.ServletContextListenerAttributeListener   |
    | Session 생명주기 변화        | Session의 생성과 소멸 등 변화에 따라 동작                    | javax.servlet.Servlet.http.HttpSessionListener          |
    | Session 속성 변화            | Session의 속성이 추가되거나 변경되는 상황에 동작             | javax.servlet.Servlet.http.HttpSessionAttributeListener |

    

  

## 필터

### 필터란?

- 서블릿이나 JSP가 실행되기 전에 response 혹은 request 객체의 조작이나 추가적인 처리를 할 수 있음(클라이언트 요청 처리 이전에 실행됨) 
-  서블릿이나 jSP가 호출되면 애너테이션으로 설정된 필터 매핑 정보를 참고하여 특정 서블릿이나 JSP에 대해 서로 다른 필터를 적용함  
- doFilter() 메서드를 사용하여 ServletRequest와 ServletResponse의 내용을 가로채 필요한 작업을 수행하고 다음 필터로 전달하거나 요청한 서블릿으로 이동함 
- 필터가 없을 경우 요청한 서블릿이나 JSP가 호출됨
  - 필터 사용 예
    - 인증 : 로그인과 권환 확인 같이 공통된 기능을 개별 컨트롤러에서 구현할 때 코드를 중복하지 않도록, 필터를 이용하여 기존 소스를 최대한 수정하지 않고 인증 기능을 수행하게함
    - 로깅/검사 : 특정 페이지나 기능에 대해 로그로 관리할 필요가 있을 때 필터를 이용하여 해당 요청을 수행하기 전 로깅 처리함
    - 국제화 : 다국어 변환 처리
    - 한글 인코딩 처리 : POST방식으로 전달되는 파라미터의 한글 처리를 위해 request.serCharacterEncoding("utf-8")을 사용했지만 필터를 통해 한 번에 처리하는 방법을 활용할 수 있음

- 필터는 여러 개 존재할 수 있으며 필터의 실행 순서를 지정하려면 "WEB.XML"에 필터를 등록하는 과정을 거쳐야 함.

- 각각의 필터는 init() 메서드를 통해 초기화되며 한번만 실행됨

  

  

## 리스너 실습

### 1. 리스너 생성





## 필터 실습

