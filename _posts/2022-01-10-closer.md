---
layout: single
title: "클로저 실용적이고 쉬운 설명."
categories: [JavaScript]
tag: [JS][closer]
toc: true
author_profile: false
sidebar:
    nav: "docs" 
---

cnt 라는 값은 무조건 cntPlus으로만 바꾸고 싶은 경우를 구현해 보고 싶다고 한다면

무조건 이 함수가 실행 됐을 때만 1씩 증가시키도록 코드를 구현하는거다.

그런 코드를 짜고 싶으면 이런 식으로 짤 수 있을 것이다.

```javascript
let cnt = 0;
function cntPlus() {
    cnt = cnt + 1;
}
console.log(cnt); // 0
cntPlus();
console.log(cnt); // 1


// 만약에 
// 1억개의 코드
cnt = 100;
//  1억개의 코드 
cntPlus();
console.log(cnt); // 101
```

내가 가정한 상황은 이 cnt 라는 변수는 무조건 cntPlus 로만 값을 증가 시킬 수 있고 다른 걸로 바꾸면 안되는 그런 상황인데 이 중간에 cnt라는 변수가 접근 가능하기 때문에 내가 생각하는 상황을 완벽하게 구현 할 수 없다. 

이런 상황을 해결하려면 **변수를 접근 못 하게 해야한다.** 

이때 필요한게 **"클로저"** 이다. 

일단 cnt가 전역변수이기 때문에 cnt를 지역변수로 바꿔 줘야 한다. 즉 **함수로 감싸준다**.

이렇게 하면 밖에서 참조를 할 수 없게되지만 cntPlus를 실행시킬수 없다. 이때 cntPlus를 사용하려면 return을 사용해야한다. 이렇게 하면 cntPlus를 실행시킬 수 있지만 cnt자체를 출력시키고싶으면 어떻게 해야 할까?

```javascript
function closure() {
 let cnt = 0;
 function cntPlus() {
     cnt = cnt + 1;
 }
    return {
        cntPlus,
    }
}

const cntClosure = closure();
console.log(cntClosure); // { cntPlus: [Function: cntPlus] }
cntClosure.cntPlus();
```

이럴 땐 출력하는 함수 printCnt를 만들면 된다. 이렇게 cnt라는 값은 기타 다른 방법으로는 이 값을 절대 바꿀 수 없다. 이 변수에 접근하는 방법은 오직 cntPlus() , printCnt()  말고는 없다.  이렇게 하면 위에서의 기능을 구현할 수 있다. 추가적인 기능이 필요 할때는 함수를 return하는 방식으로 구현한다.

```javascript
function closure() {
 let cnt = 0;
 function cntPlus() {
     cnt = cnt + 1;
 }
    function printCnt() {
        console.log(cnt);
    }
    return {
        cntPlus,
        printCnt,
    }
}

const cntClosure = closure();
console.log(cntClosure); // { cntPlus: [Function: cntPlus] }
cntClosure.printCnt(); // 0
cntClosure.cntPlus();
cntClosure.printCnt(); // 1
```

