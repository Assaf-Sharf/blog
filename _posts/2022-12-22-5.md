---
layout: single
title:  "변수와 식별자"
---

### 5장 식별자와 변수

PL/SQL에서 사용할 수 있는 문자 집합은 다음과 같습니다. 이외의 문자열은 PL/SQL 블록 안에서 허용 되지 않습니다.

| 유형 | 문자 |
| --- | --- |
| 문자 | A~Z, a~z |
| 숫자 | 0~9 |
| 기호 | ~ ! @ # $ % ^ & * ( ) _ - + = | [ ] { } : ; < > , . ? / |
| 기타 | tap, space, new line, carriage return |

또한 PL/SQL 안에서 특별한 의미를 담고 있는 문자가 있으며 아래와 같습니다.

| 기호 | 설명 |
| --- | --- |
| ; | 세미콜론. 문장이 끝남 |
| % | %ISOPEN과 같은 커서 속성과 %TYPE과 같은 속성 표시, 또는 LIKE 문장에서 와일드 카드 기호로 사용 |
| <>, ≠, ^=, ~≠ | 같지 않음을 표시 |
| || | 연결 연산자 (== SQL) |
| <<, >> | 레이블 구분자 |
| <, >, ≤, ≥ | 비교 연산자 |
| := | 할당 연산자 |
| ⇒ | 위치 표기를 위한 연산자(프로시저나 패키지의 매개변수 지정 시 사용) |
| — | 주석 |

## 식별자 규칙

PL/SQL의 객체 명을 식별자로 부르며 아래의 객체를 포함합니다

- 상수
- 스칼라 변수
- 복합 변수
- 예외
- 프로시저, 함수, 패키지
- 커서
- 예약어
- 타입
- 레이블

PL/SQL에서 사용될 식별자는 아래 규칙에 따라 선언해야 합니다.

- 알파벳으로 시작해야함
- 알파벳 이외 숫자, $, _(언더스코어), # 기호를 포함 할 수 있음
- 최대 길이는 30자 이내여야함
- 공백 포함 불가
- 예약어는 식별자로 사용 할 수 없다.

### 변수 선언

변수 선언시 익명 블록 DECLARE 절, 패키지, 프로시저 및 함수는 IS 절에서 선언되며 기본값(default)까지 한번에 설정 가능

변수 타입 설정 시 작게 설정해 에러가 발생하거나 크게 설정해 메모리가 낭비하지 않도록 하는것이 중요함

```sql
DECLARE

  l_salary        NUMBER;             -- NUMBER형 변수 선언
  l_hours_worked  NUMBER := 40;       -- NUMBER형 변수 선언 및 초기값 설정
  l_hourly_salary PLS_INTEGER :=1000; -- NUMBER형 변수 선언 및 초기값 설정
  l_country       VARCHAR2(128);      -- VARCHAR2형 변수 선언
  l_boolean       BOOLEAN;            -- BOOLEAN형 변수 선언
  l_emp_rec       emp%ROWTYPE;        -- employee테이블의  레코드타입로 변수선언
  TYPE commissions IS TABLE OF NUMBER INDEX BY PLS_INTEGER; -- pls_integer형의 배열타입 변수 선언
  l_comm_tab commissions;             -- 사용자 정의 타입의 변수 선언
  
BEGIN
  l_salary := (l_hours_worked * l_hourly_salary) ; 
  l_country := 'Korea';
  l_country := UPPER('Korea');
  l_boolean := TRUE;
  l_emp_rec.ename := 'Scott';
  l_comm_tab(2) := 10000 * 0.15;
  
  DBMS_OUTPUT.PUT_LINE('Salary :' || l_salary);
  DBMS_OUTPUT.PUT_LINE('Country :' || l_country);
  DBMS_OUTPUT.PUT_LINE('emp_rec.ename :' || l_emp_rec.ename);
  DBMS_OUTPUT.PUT_LINE('comm_tab :' || l_comm_tab(2));

END;
/
```

### 변수 범위와 가시성

변수의 스코프 범위는 프로그램 유닛(블록, 서브프로그램, 패키지) 단위 내에서만 통용되며, 이 범위를 벗어날 경우 메모리에서 할당이 해제

같은 변수 명으로 새로운 BEGIN~END 절 안에서 재선언 시 블록 안에서는 새로 선언된 변수로 사용

```sql
<<OUTER>> -- 레이블 구분자
DECLARE
	I_hiredate VARCHAR2(20) := '09-AUG-12';

	BEGIN
		--안쪽 블록의 레이블
		<<INNER>>
		DECLARE
			I_hiredate VARCHAR2(20);
		BEGIN
			--outer 블록에서 사용된 변수명을 inner 블록에서 사용
			I_hiredate := '10-AUG-12';
			
			--outer 블록의 I_hiredate를 사용하기 위해 outer.I_hiredate 사용
			--두 식별자명은 같으나 서로 다른 변수이므로 비교시 false를 반환함
			IF I_hiredate = outer.I_hiredate THEN
				DBMS_OUTPUT.PUT_LINE('same Hiredate');
			ELSE
				DBMS_OUTPUT.PUT_LINE('Different Hiredate');
			END IF;
		
			DBMS_OUTPUT.PUT_LINE('outer hiredate:' || outer.I_hiredate);
			DBMS_OUTPUT.PUT_LINE('inner hiredate:' || outer.I_hiredate);
	END;
DBMS_OUTPUT.PUT_LINE('outer hiredate :' || I_hiredate);

END;
```

바깥 변수에서 선언한 I_hiredate와 안쪽 블록의 I_hiredate는 식별자 명은 서로 같으나 값은 다르다는 예시 코드

### 문자열 안에 따옴표 사용하기

문자열을 저장하거나 출력할 때 따옴표(’)를 넣어야 할 경우가 있음 두번째 따옴표만 문자 값으로 인식

```sql
BEGIN
	DBMS_OUTPUT.PUTLINE('There''snomagic');
	DBMS_OUTPUT.PUTLINE('''Hi''');
END;

/* result */
/*
	There's no magic
	'Hi'
*/
```
