---
title: "Spring MVC 모델"
categories:
  - Spring
toc: true
toc_label: "목차"
#toc_icon:
toc_sticky: true
#last_modified_at:
---

## 1. < spring:message> 태그 사용하는 이유
사용자 화면에 보일 문자열은 JSP에 직접 코딩한다. 예를 들어 로그인 폼을 보여줄 떄 '아이디', '비밀번호' 등의 문자열을 다음과 같ㅌ이 뷰 코드에 직접 삽입한다.

```jsp
<label>이메일</label>
<input type="text" name="email>
```

### 1.1 수정시 불편함
'이메일'과 같은 문자열은 로그인 폼, 회원가입 폼, 회원 정보 수정 폼에서 반복해서 사용된다. 이렇게 문자열을 직접 하드 코딩하면 동일 문자열을 변경할 때 문제가 있다. 예를 들어 폼에서 사용할 '이메일'을 '이메일 주소'로 변경하기로 했다면 각 폼을 출력하는 JSP를 찾아서 모두 변경해야 한다.

## 1.2 다국어 지원
문자열이 뷰 코드에 하드 코딩 되어 있을 때의 또 다른 문제점은 다국어 지원에 있다. 전 세계를 대상으로 서비스를 제공해야 하는 경우 사용자의 언어 설정에 따라 '이메일', 'E-mail'과 같이 각 언어에 맞게 문자열을 표시해야 한다. 그런데 뷰 코드에 '이메일'이라고 문자열이 하드 코딩되어 있으면 언어별로 뷰 코드를 따로 만드는 상황이 발생한다.

두 가지 문제를 해결하는 방법은 뷰 코드에서 사용할 문자열을 언어별로 파일에 보관하고 뷰 코드는 언어에 따라 알맞은 파일에서 문자열을 읽어와 출력하는 것이다. 스프링은 자체적으로 이 기능을 제공하고 있다.

## 2. < spring:message> 태그로 메시지 출력하기
문자열을 별도 파일에 작성하고 JSP 코드에서 이를 사용하려면 다음 작업을 하면 된다.
- 문자열을 담은 메시지 파일을 작성한다.
- 메시지 파일에서 값을 읽어오는 MessageSource 빈을 설정한다.
- JSP 코드에서 < spring:message> 태그를 사용해서 메시지를 출력한다.

### 2.1 메시지 파일 작성
매시지 파일은 자바의 프로퍼티 파일 형식으로 작성한다. 메시지 파일을 보관하기 위해 src/main/resources에 message 폴더를 생성하고 이 폴더에 label.properties 파일을 생성한다.

```properties
member.register=회원가입

term=약관
term.agree=약관동의
next.btn=다음단계

member.info=회원정보
email=이메일
name=이름
password=비밀번호
password.confirm=비밀번호 확인
register.btn=가입 완료

registrer.done=<strong>{0}님</strong>, 회원 가입을 완료했습니다.

go.main=메인으로 이동
```

### 2.2 MessageSource 빈 설정
스프링 설정 중 한 곳에 추가하면 된다. 난 MvcConfig 설정 클래스에 추가하겠다. 다음과 같이 코드를 추가한다.

```java
@Configuration
@EnableWebMvc
public class MvcConfig implements WebMvcConfigurer{

    ...

    @Bean
    public MessageSource messageSource(){
        ResourceBundleMessageSource ms =
                new ResourceBundleMessageSource();
        ms.setBasenames("message.label");
        ms.setDefaultEncoding("UTF-8");
        return ms;
    }
}
```

basenames 프로퍼티 값으로 "message.label"을 주었다. 이는 message 패키지에 속한 label 프로퍼티 파일로부터 메시지를 읽어온다고 설정한 것이다. src/main/resources 폴더도 클래스 패스에 포함되고 message 폴더는 message 패키지에 대응한다. 따라서 이 설정은 앞서 작성한 label.properties 파일로부터 메시지를 읽어온다. setBasenames() 메서드는 가변 인자이므로 사용할 메시지 프로퍼티 목록을 전달할 수 있다.

## Ref.
- 최범균, 스프링프로그래밍입문5, 가메출판사.