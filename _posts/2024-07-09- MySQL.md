## MySQL 설치 및 스키마 생성 방법

![image_720](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/02e6f85f-f68b-40b4-ad8c-2e0b4479e6aa)


## 스키마 생성


```python
스키마명 : mydata

CREATE DATABASE mydata;
CREATE SCHEMA `mydata` ;
SHOW databases;
```

![image_360](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/f4367bd3-c174-4761-b6b1-b2861baf85e8)


![image_480](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/b60f7488-69b3-4b94-a775-53693e03477d)


## 파일 넣기

![스크린샷(65)](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/5d2b89c9-0117-4c21-a643-72f1506d1e06)


![스크린샷(66)](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/734ff203-98fc-4b2b-9ed0-b4c4a63c1c03)


![스크린샷(67)](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/c7a3d6d3-a126-42e5-a02c-75da03e6dca8)


![스크린샷(68)](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/65b66170-64a8-499d-a263-87accfe36715)


## 기본 문법

![스크린샷 2024-07-09 110843](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/b7cb051b-94b0-4941-b8fa-63f78300d417)



```python
USE classicmodels; -- 해당 Database를 사용하겠음
CREATE SCHEMA mydata2;
SHOW databases;


SELECT * FROM customers; -- Ctrl + Enter

SELECT * FROM classicmodels.customers; -- 이렇게 하기 귀찮음
USE classicmodels; -- 사용
SHOW tables;

-- 현재 사용중인 스키마를 확인
SELECT DATABASE();

USE sakila;
SELECT * FROM customers; -- 간결하게

-- 
DESC customers;

-- SELECT : 선택하다 필드를
SELECT * FROM customers;
SELECT customerNumber, customerName, contactFirstName FROM customers;
SELECT 
	customerNumber
    , customerName
    , contactFirstName
FROM 
	customers
;


-- customerNumber, customerName, contactLastName, contactFirstName, phone, addressLine1, addressLine2, city, state, postalCode, country, salesRepEmployeeNumber, creditLimit
```

## 코드 짜는 방식


```python
/* 
SELECT 필드명
FROM 테이블명
WHERE 필드명에 관한 여러 조건식
*/
```


```python
SELECT 
	customerNumber
    , customerName
    , contactFirstName
FROM 
	customers
;
```

## where 조건

![스크린샷 2024-07-09 140919](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/1682bc3d-d535-4891-9f9b-f7bf21d72445)


```python
-- WHERE 조건 : 필터링
SELECT * 
FROM 
	customers
WHERE country = 'USA'
;

SELECT * 
FROM 
	customers
WHERE country = 'USA'
;

SELECT *
FROM 
	customers
WHERE customerNumber = 112
;

SELECT *
FROM 
	customers
WHERE customerNumber = '112'
;

SELECT *
FROM 
	customers
WHERE customerNumber >= 112
;
```


![스크린샷 2024-07-09 141026](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/43a83870-b816-435e-8e57-558fc8e274e0)


조건대로 잘 추출됐음을 알 수 있다.

## 문자열과 부등호 연산자


```python
-- 문자열과 부등호 연산자
SELECT state
FROM 
	customers
WHERE 
	state <> 'D';
```

## where like 연산자


```python
-- WHERE LIKE 연산자
SELECT * 
FROM 
	customers
WHERE customerName LIKE '%La%'
;

-- 문자열 검색할 때 가장 유용한 것 : 정규표현식을 활용한 검색
-- 매우 어려움, 근데 무조건 필요함!!! 

SELECT * 
FROM 
	customers
WHERE customerName REGEXP '^La';
;
```

## AND


```python
-- AND 
-- country가 USA이면서 city NYC인 고객을 조회하세요
-- 필드는 전체 조회
SELECT * 
FROM 
	customers
WHERE country = 'USA' AND city = "NYC"
;
```

## OR


```python
-- OR 조건
SELECT * 
FROM 
	customers
WHERE country = 'USA' OR contactLastName = "Lee"
;
```

## 테이블 Payments


```python
-- 테이블 Payments
SELECT * FROM payments;
```

## BETWEEN 연산자


```python
-- BETWEEN 연산자 
SELECT * 
FROM 
	payments 
WHERE 
	amount BETWEEN 10000 AND 50000
    AND paymentDate BETWEEN '2003-05-20' AND '2003-06-05' 
    AND checkNumber LIKE '%JM%'
;

```

## IN 연산자


```python
-- IN 연산자
SELECT * 
FROM 
	offices
WHERE country IN ('USA', 'France', 'UK');    
;

SELECT * 
FROM 
	offices
WHERE country NOT IN ('USA', 'France', 'UK');    
;

```

## ORDER BY 절, sort_values(), 정렬 


```python
-- ORDER BY 절, sort_values(), 정렬 
SELECT * 
FROM orders
ORDER BY orderNumber DESC -- 내림차순
;

SELECT * 
FROM orders
ORDER BY orderNumber ASC -- 오름차순
;

SELECT customerNumber, orderNumber
FROM orders
ORDER BY customerNumber ASC -- 오름차순
;

SELECT customerNumber, orderNumber
FROM orders
ORDER BY 1 ASC, 2 DESC 
;
```

## GROUP BY 와 HAVING 


```python
-- GROUP BY 와 HAVING 
SELECT * from orders;
select 
	distinct statue -- 중복값 제거
FROM orders
;

```

## 집계 함수

![스크린샷 2024-07-09 161136](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/7076263e-1384-434a-9820-1c33652a8d8b)



```python
-- 집계함수
select 
	status
    , COUNT(*) AS "갯수"
from
	orders
group by
	status
HAVING COUNT(*) >= 5
ORDER BY 2 DESC
;

```

![스크린샷 2024-07-09 161518](https://github.com/jiyoungeeeeeeeeeeeeeeeeeeeee/pp/assets/173663630/c2da80df-38fc-4cc2-a9dc-492833fb68ad)



```python
select 
	status
    , COUNT(*) AS "갯수"
from
	orders
group by
	status
HAVING 갯수 >= 5
ORDER BY 2 DESC
;

```

AS  "갯수" 설정 시, HAVING COUNT(*) -> HAVING 갯수 로 입력해도 잘 작동됌을 확인할 수 있다.

## 에러

### GROUP BY가 빠졌을 때,


```python
select 
	status
    , COUNT(*) AS "갯수"
from
	orders

#group by 조건 없음 

ORDER BY 2 DESC
;

```

select   status     , COUNT(*) AS "갯수" from  orders ORDER BY 2 DESC LIMIT 0, 1000	Error Code: 1140. In aggregated query without GROUP BY, expression #1 of SELECT list contains nonaggregated column 'classicmodels.orders.status'; this is incompatible with sql_mode=only_full_group_by	0.000 sec



```python
select 
	country
    ,city
    , count(*)
FROM 
	customers
GROUP BY country   #city가 없음
;

```

select   country     ,city     , count(*) FROM   customers GROUP BY country LIMIT 0, 1000	Error Code: 1055. Expression #2 of SELECT list is not in GROUP BY clause and contains nonaggregated column 'classicmodels.customers.city' which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by	0.000 sec

