---
layout: single
title:  "[DATABASE] SQL문 기초"
categories: SQL,DATABASE
tag: SQL,DATABASE
author_profile: false
---

```sql
-- 데이터 조회 
SELECT 열이름 
FROM 테이블명
[WHERE]조건식
[GROUP BY 속성 HAVING 조건] --GROUP BY 이에 조건문을 쓸떄는 HAVING 을써야함 WHERE 불가능
[ORDER BY 속성 [ASC}DESC]]; --ASC: 오름차순,DESC:내림차순
PREDICATE: ALL, DISTINCT(중복제거), DISTINCTROW(튜플 전체 대상으로 중복 제거)
연산자: = <> < LIKE(문자열비교)(%문자열, _문자, #숫자), NOT, AND


-- 집게 함수(GROUP BY와 함꼐 주로 사용되는 집게 함수)
- SUM(),AVG(),MIN(),MAX(),COUNT()
ex)집게함수를 사용하여 회원이 구매한 총합
SELECT mem_id "회원 아이디", SUM(price*amount) "총구매 금액"
FROM buy
group by mem_id;

```
<br>
<br>

# GROUP BY
GROUP BY 절은 말 말그대로 그룹으로 묶어주는 역활은 한다. 

## GROUP BY 사용이유

* <span style="background-color:#fff5b1"> GROUP 사용 전 </span><br>

```sql
SELECT mem_id, amount FROM buy ORDER BY mem_id;
```
회원 아이디와 구매 개수를 출력하는 쿼리문<br>


![image description](/assets/images/data.png)<br>

APN(에이핑크) 회원의 경우에는 1+2+1+1=5개의 물건을 구매했다. 그러나 합계를 이렇게 암산이나 계산기로 계산해야 한다면 MySQL을 사용할 이유가 없다.

* <span style="background-color:#fff5b1"> GROUP 사용 후  </span><br>

```sql
SELECT mem_id "회원 아이디", SUM(amount) "총구매 개수"
FROM buy
GROUP by mem_id;
```
각회원(mem_id)별로 구매한 개수(amount)를 합쳐서 출력하기 위해서는 집게 함수인 SUM()과 GROUP BY 절을 사용함.GROUP BY로 회원별로 묶어준 후에 SUM() 함수로 구매한 개수를 합치면 된다. 

![image description](/assets/images/data1.png)<br>

다음과 같이 총 구매개수가 5개 인것을 확인할수있다.


