---
layout: single
title: "부산 맛집 총점 순위"
categories: Crawling
tag:
  [python, crawling, blog, github, naver, 맛집, 평점, 순위, 부산, 가게,  크롤링, 파이썬,  멀티캠퍼스, 국비, 빅데이터 교육]
toc: true
sidebar:
  nav: "docs"
---

## 1. CSV 데이터 불러오기

망고플레이트, 트립어드바이저, 구글, 카카오, 네이버의 '부산맛집' 검색 데이터


```python
import pandas as pd

df_mango = pd.read_csv('mango_revise.csv')
df_trip = pd.read_csv('trip_revise.csv')
df_goo = pd.read_csv('google.csv')
df_kao = pd.read_csv('kakao225.csv', encoding='cp949')
df_naver = pd.read_csv('naver02.11.12h.csv')
```


```python
# 망고 데이터의 Title 기준으로 Merge

df_merge = pd.merge(df_mango,df_naver,how='left',left_on='Title',right_on='title')
df_merge2 = pd.merge(df_merge,df_goo, how='left',left_on='Title',right_on='name')
df_merge3 = pd.merge(df_merge2,df_kao, how='left',left_on='Title',right_on='Title')
df_merge4 = pd.merge(df_merge3,df_trip, how='left',left_on='Title',right_on='Point_trip')
df_merge4.head(2)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Title_x</th>
      <th>Point_x</th>
      <th>View</th>
      <th>Review_x</th>
      <th>Star</th>
      <th>Type_x</th>
      <th>Unnamed: 0_x</th>
      <th>title</th>
      <th>rating_x</th>
      <th>review_x</th>
      <th>...</th>
      <th>rating_y</th>
      <th>review_y</th>
      <th>category</th>
      <th>Point_y</th>
      <th>Review_y</th>
      <th>Type_y</th>
      <th>Title_y</th>
      <th>Point_trip</th>
      <th>Review_trip</th>
      <th>Site_trip</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>비비비당</td>
      <td>4.6</td>
      <td>136578</td>
      <td>74</td>
      <td>3782</td>
      <td>카페 디저트 오늘의 차 우전녹차 특말차 복분자 냉 오미자차</td>
      <td>11.0</td>
      <td>비비비당</td>
      <td>4.48</td>
      <td>1,006</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>3.7</td>
      <td>59.0</td>
      <td>전통찻집</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>톤쇼우1</td>
      <td>4.6</td>
      <td>26176</td>
      <td>38</td>
      <td>867</td>
      <td>돈까스 요리</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 23 columns</p>
</div>




```python
# 빈 데이터프레임 만들기 (각 데이터의 점수 합치는 용도)
df_ranking = pd.DataFrame(index = range(0,200), columns  = ['Title','Mango','Naver','Google','Kakao'])
```

## 2. df_ranking 에 필요 자료들 넣기


```python
df_ranking['Title'] = df_merge4['Title_x']
df_ranking['Mango'] = df_merge4['Point_x']
df_ranking['Naver'] = df_merge4['rating_x']
df_ranking['Google'] = df_merge4['rating_y']
df_ranking['Kakao'] = df_merge4['Point_y']

df_ranking.head(2)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Title</th>
      <th>Mango</th>
      <th>Naver</th>
      <th>Google</th>
      <th>Kakao</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>비비비당</td>
      <td>4.6</td>
      <td>4.48</td>
      <td>NaN</td>
      <td>3.7</td>
    </tr>
    <tr>
      <th>1</th>
      <td>톤쇼우1</td>
      <td>4.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 결측치 0으로 처리 (다른 사이트에 검색결과 없는 식당)
df_ranking = df_ranking.fillna(0)
df_ranking.head(2)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Title</th>
      <th>Mango</th>
      <th>Naver</th>
      <th>Google</th>
      <th>Kakao</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>비비비당</td>
      <td>4.6</td>
      <td>4.48</td>
      <td>0.0</td>
      <td>3.7</td>
    </tr>
    <tr>
      <th>1</th>
      <td>톤쇼우1</td>
      <td>4.6</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
# total 칼럼에 식당별 사이트평점 총합 넣기
df_ranking['Total'] = df_ranking.sum(axis=1)
```


```python
# 식당 메뉴 등 정보 넣기
df_ranking['Info'] = df_merge4['Type_x']
df_ranking.head(2)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Title</th>
      <th>Mango</th>
      <th>Naver</th>
      <th>Google</th>
      <th>Kakao</th>
      <th>Total</th>
      <th>Info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>비비비당</td>
      <td>4.6</td>
      <td>4.48</td>
      <td>0.0</td>
      <td>3.7</td>
      <td>12.78</td>
      <td>카페 디저트 오늘의 차 우전녹차 특말차 복분자 냉 오미자차</td>
    </tr>
    <tr>
      <th>1</th>
      <td>톤쇼우1</td>
      <td>4.6</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.60</td>
      <td>돈까스 요리</td>
    </tr>
  </tbody>
</table>
</div>



## 3. sort_values 를 통해 내림차순 정렬


```python
df_ranking = df_ranking.sort_values(by=['Total'],ascending=False)
df_ranking.head(5)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
    
    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Title</th>
      <th>Mango</th>
      <th>Naver</th>
      <th>Google</th>
      <th>Kakao</th>
      <th>Total</th>
      <th>Info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>해목</td>
      <td>4.5</td>
      <td>4.44</td>
      <td>4.3</td>
      <td>3.9</td>
      <td>17.14</td>
      <td>정통 일식 일반 일식 특히츠마부시 민물장어덮밥 특카이센동 해산물덮밥 카이센동 해산물...</td>
    </tr>
    <tr>
      <th>10</th>
      <td>고옥</td>
      <td>4.4</td>
      <td>4.48</td>
      <td>4.2</td>
      <td>3.7</td>
      <td>16.78</td>
      <td>돈부리 일본 카레 벤토</td>
    </tr>
    <tr>
      <th>149</th>
      <td>에쎄떼</td>
      <td>3.9</td>
      <td>4.57</td>
      <td>4.3</td>
      <td>3.7</td>
      <td>16.47</td>
      <td>카페 디저트</td>
    </tr>
    <tr>
      <th>153</th>
      <td>기장손칼국수</td>
      <td>3.9</td>
      <td>4.40</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>16.30</td>
      <td>국수 면 요리</td>
    </tr>
    <tr>
      <th>127</th>
      <td>자매국밥</td>
      <td>4.0</td>
      <td>4.48</td>
      <td>4.2</td>
      <td>3.4</td>
      <td>16.08</td>
      <td>탕 찌개 전골</td>
    </tr>
  </tbody>
</table>
</div>



### 두구두구두구두구...망고, 네이버, 구글, 카카오 평점 합산 결과
 1위 해목 (카이센동)  
 2위 고옥 (돈부리)  
 3위 에세떼 (카페)  
 4위 기장손칼국수 (국수)   
 5위 자매국밥 (탕, 찌개)  
