---
layout: single
title:  "SQLInjection 이론 01"
---

# SQLi란?

SQL Query를 처리하는 과정에서 예상치 못란 입력 값에 의해 DBMS 정보 노출, 특정 명령 실행 등이 발생하는 취약점

공격자는 정상적인 값 대신 자신이 원하는 값을 웹에 요청하고  -> 웹은 데이터베이스에 요청을 한뒤 결과 값이 -> 웹을 통해 노출되거나 유추할 수 있는 형태로 출력됨 

SQL Injection(이하 SQLi)은 공격자가 웹 애플리케이션의 데이터베이스에 악의적인 SQL 쿼리를 삽입하여 실행하는 해킹 기법이다. 이를 통해 공격자는 데이터베이스의 정보를 무단으로 조회, 변경, 삭제할 수 있으며, 심각한 경우 데이터베이스 서버의 전체 제어권을 획득할 수도 있다.

###### SQL Query (Structured Query Language)란?

데이터베이스에서 데이터를 조작하고 관리하기 위한 표준 언어이다. SQL 쿼리는 데이터베이스와 상호작용하여 데이터를 조회, 삽입, 수정, 삭제하는 데 사용된다.

###### DBMS(Database Management System, 데이터베이스 관리 시스템)란?

데이터를 효율적으로 관리하기 위해 사용하는 소프트웨어 시스템입니다. DBMS는 데이터베이스의 생성, 유지 관리, 보안, 백업 및 복구 등의 기능을 제공합니다. 대표적인 DBMS로는 MySQL, PostgreSQL, Oracle, SQL Server 등이 있습니다.

## SQL Injection 공격의 원리

SQLi 공격은 주로 웹 애플리케이션이 사용자 입력을 제대로 검증하지 않고 SQL 쿼리에 포함시킬 때 발생한다. 예를 들어, 로그인 폼이 있는 웹 애플리케이션에서 SQL 쿼리를 직접 사용한다고 가정해보겠습니다.

```
SELECT * FROM users WHERE username = '사용자 입력' AND password = '사용자 입력';
```

공격자가 사용자 이름 필드에 다음과 같이 입력 한다 가정한다.

```
' OR '1'='1
```

최종 쿼리는 다음과 같이 변환한다.

```
SELECT * FROM users WHERE username = '' OR '1'='1' AND password = '';
```

'1'='1' 조건이 항상 참이기 때문에, 데이터베이스는 모든 사용자의 정보를 반환하게 된다. 이는 인증을 우회할 수 있게 하며, 더 나아가 데이터베이스의 민감한 정보를 획득할 수 있다.

#### 3. SQL Injection의 위험성

- **데이터 유출**: 공격자는 고객 정보, 금융 정보 등 민감한 데이터를 탈취할 수 있습니다.
- **데이터 변조**: 공격자는 데이터를 변경하거나 삭제하여 데이터베이스의 신뢰성을 훼손할 수 있습니다.
- **권한 상승**: 공격자는 데이터베이스의 관리자 권한을 획득하여 시스템 전체를 장악할 수 있습니다.
- **서비스 장애**: 공격자는 데이터베이스 서버를 손상시키거나 과부하를 유발하여 서비스 장애를 일으킬 수 있습니다.

#### 4. SQL Injection 공격의 예

1. **블라인드 SQLi (Blind SQL Injection)**: 응답의 차이를 통해 데이터베이스 구조나 데이터를 유추하는 방법입니다.
2. **에러 기반 SQLi (Error-based SQL Injection)**: 에러 메시지를 통해 데이터베이스 정보를 획득하는 방법입니다.
3. **유니온 기반 SQLi (Union-based SQL Injection)**: `UNION` 연산자를 사용하여 여러 쿼리의 결과를 하나로 결합해 데이터를 탈취하는 방법입니다. bb
