---
title: "2023-04-19 TIL"
categories:
  - TIL

tags:
  - [TIL]

toc: true
toc_sticky: true

author_profile: true
date: 2023-04-19
---

## TIL - NodeJS Personal Assignment

### 문제 사항

#### 1.Invalid URL

![Invalid URL](/images/2023-04-19-til/invalid_URL.png)

- 댓글 생성하는 API를 개발하는 도중 위와 같은 에러가 발생하였다.
  /:\_postId 경로 변수를 URL에서 전달하지 않고 호출하여 발생

#### 2. posts.password !== password 가 항상 true를 반환

![password](/images/2023-04-19-til/password.png)

- 위의 코드에 따르면 find로 \_id가 \_postId와 같은 문서를 찾아서 posts라는 변수에 데이터를 저장하게 된다. 그래서 posts의 password와 내가보내는 password가 일치하면 false값이 출력되어야 하는데 일치하나 일치하지 않나 상관없이 true 값이 출력되었다.

### 문제 해결

#### 1.Invalid URL 문제 해결

![Solve](/images/2023-04-19-til/invalid_URL_solve.png)

- parmas로부터 \_Id의 데이터를 전달받아 \_postId 변수에 저장함으로써 문제해결하였다.

#### password 조건이 항상 true를 반환되는 문제 해결

![find](/images/2023-04-19-til/find.png)

- find()는 매개변수로 전달된 조건에 해당하는 모든 문서를 배열 형태로 반환한다. 따라서 \_id가 \_postId와 일치하는 모든 문서를 배열형태로 반환하므로 if(!post)일때 빈 배열('[]')을 반환하게 된다. 그러므로 posts[0]은 undifined이므로 post[0]안에 있어야 할 password를 비교할 수 없게돼서 항상 true를 반환하게 된다.

![find](/images/2023-04-19-til/findOne.png)

- 해결 방법은 find()메서드가 아닌 findOne() 메서드를 사용하는 것이다. findOne()메서드는 조건에 해당하는 단일 문서를 객체 형태로 반환하기 때문에 \_id에 해당하는 단 하나의 게시물만 가져오게 된다. 그래서 문제가 발생하지 않는다.

### 개인 프로젝트를 하면서 느낀점

- #### 목표 설정하기
  - API를 만들기로 목표를 설정했다면 전체적으로 보기보다는 좀 더 세분화하여 생각해 보는 것이 낫다. 이번 프로젝트에서는 너무 전체적으로만 보다보니 머부터 해결해야할지 몰라서 허둥지둥댔던거 같다. 먼가 될거같은데 어디서부터 어떻게 시작해야하지 라는 생각이 앞서서 빠르게 해결할 수 있었던 것도 많은 시간이 걸린거 같아서 아쉽다.
- #### 해결 순서 작성하기

  - 목표에 대한 해결 순서를 작성하여 하나하나씩 클리어 해 나가면 좀 더 효율적으로 정답에 접근해 나갈 수 있다는 것을 깨달았다. 게시글 작성 API를 만들겠다는 목표를 세웠다고 가정해보자

    1.  Schema 만들기
    2.  게시글 작성 API Template 만들기
    3.  게시글 작성 API Template 호출되는지 확인하기
    4.  Body 데이터가 정상적으로 전달되는지 확인
    5.  게시글과 관련된 Schema 정상 사용되는지 확인
    6.  게시글 작성 API 구현하기

  - 이런식으로 좀 더 세분화하여 쉽게 쉽게 접근해나갈 필요성이 있다는 것을 깨달았다.

- #### 트러블 슈팅 관련 미리 작성하기

  - 트러블 슈팅이 발생했을때마다 작성한다는 뜻이 아니라 틀을 잡아놔야겠다라고 생각한다. 구현이 끝나고 작성하려니 무엇이 문제였고 내가 어떠한 방식들로 시도했는지 까먹게 되어 작성하는데 굉장히 힘들었다. 어떠한 오류가 발생했는지 어떠한 시도들을 하였고 어떻게 해결했는지 간단하게라도 적어야한다는 것을 알게 되었다.

- #### TIL 매일 작성하기
  - 사람의 습관이라는게 참 무서운 것 같다. 하루 이틀 안적기 시작하니 습관화되어서 차일피일 기한을 미루게 된다. 게으른 사람이 되지 말자!
