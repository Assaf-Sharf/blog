---
layout: single
title:  "8장 데이터조작"
---


# 2022-12-27-8

# 8장 NULL 제어

NULL은 미지의 값으로서 NULL이 포함된 비교 연산은 역시 미지의 값으로 연산이 불가능 NVL이나 DECODE 함수로 NULL값을 대체 해야함. PL/SQL에서도 마찬가지로 NULL값이 포함된 경우 연산 시 주의를 기울여야 합니다.

컬럼의 값이 NULL이 포함되어 있을 시 연산이나 조인 시 반드시 주의해서 처리해야합니다. NULL이 최소한으로 사용될 수 있도록 최초에 어플리케이션을 설계하는 것이 좋습니다. 디폴트값 설정 Boolean 타입의 경우 FALSE나 TRUE로 NULL값이 입력되지 않도록 NOT NULL조건으로 하는것이 좋습니다.

예시코드 NULL을 제어하여 NVL함수를 사용해 PL/SQL에서 연산 하는 방법

```sql
DECLARE
	x NUMBER := 5;
	y NUMBER := NULL;

BEGIN
	--y가 NULL이므로 비교 연산이 불가능 하므로 FALSE
	IF x!= y THEN
		DBMS_OUTPUT.PUT_LINE('x != y');

	--y가 NULL이므로 비교 연산이 불가능 하므로 FALSE
	ELSEIF x = y THEN
		DBMS_OUTPUT.PUT_LINE('x=y');

	--비교연산이 불가능 하므로 ELSE문만 수행
	ELSE 
		DBMS_OUTPUT.PUT_LINE('Can''t tell if x and y anre equal or not.');
	END IF;

	--NULL 여부는 IS NULL 함수를 이용하여 비교함
	IF y NULL THEN
		DBMS_OUTPUT.PUT_LINE('y is null');
	END IF;

	-- NULL 일 경우 NBL을 이용하여 비교 수행
	IF x = NVL(y,5) THEN
		DBMS_OUTPUT.PUT_LINE('x = y');
	ELSE
		DBMS_OUTPUT.PUT_LINE('x != y');
	END IF;
END;
/

--result
-- y is null x = y (nvl 함수 사용)
```

SQL도 마찬가지만 QL/SQL에서도 블록 내에서 NULL 값을 비교 하고 싶다면 IS NULL 함수 사용, 비교, 변환 할경우 NVL, NULLIF, COALESCE와 같은 함수를 사용하여 비교 변환 단, NVL2는 PL/SQL에서 지원 하지 않습니다.

```sql
--NULL IF 사용
SELECT empno, NULLIF(empno, empno2) empno2
	FROM (
					--짝수 번째 데이터는 동일, 홀수 번째는 empno에 1을 추가
					SELECT empno, empno + MOD(empno,2) empno2
					FROM emp
					WHERE deptno = 10

		)
```

```sql
--NULL IF 사용
SELECT empno, NULLIF(empno, empno2) empno2
	FROM (
					--짝수 번째 데이터는 동일, 홀수 번째는 empno에 1을 추가
					SELECT empno, empno + MOD(empno,2) empno2
					FROM emp
					WHERE deptno = 10
		)
;

--COALESCE 사용
SELECT COALESCE(NULL, 'A','B' COL1,
				COALELSE(NULL,NULL,'C','D') COL2
FROM DUAL
```