---
title: "[Oracle-Sql] C.9 Data Normalization"

categories:
  - Oracle-Sql
tags:
  - [Normalization]

toc: true
toc_sticky: true

date: 2023-07-24
last_modified_at: 2023-07-24
---

<!-- {% capture notice-2 %}

üìã This is the tech-news archives to help me keep track of what I am interested in!

- Reference tech news link: <https://thenextweb.com/news/blockchain-development-tech-career>
  {% endcapture %}

<div class="notice--danger">{{ notice-2 | markdownify }}</div> -->

üìã This is my note-taking from what I learned in the class "Introduction To Database Concept"
{: .notice--danger}

<br>

# Entity-Relationship Model (E-R Model)

- Used to depict the relationship that exists among entities
- The following relationships can be included in an E-R model:
  : - One-to-one
  : - One-to-many
  : - Many-to-many

![img](../../assets/images/ER%20model.png)

## Relationships

- One-to-one
  : Each occurrence of data in one entity is represented by only one occurrence of data in the other entity
  : - Example: Each individual has just one Social Security number (SSN) and each SSN is assigned to just one person
- One-to-many
  : Each occurrence of data in one entity can be represented by many occurrences of the data in the other entity
  : - Example: A class has only one instructor, but each instructor can teach many classes
- Many-to-many
  : Data can have multiple occurrences in both entities
  : - Example: A student can take many classes, and each class is composed of many students
  : Can not be included in the physical database

## JustLee Example E-R model

![img](../../assets/images/JustLee%20ER%20model.png)

<br>

# Database Normalization

Many people unfamiliar with database design principles often ask, ‚ÄúWhy not just put all the data in one big table?‚Äù This single-table approach leads to problems of data redundancy (duplication) and data anomalies (data inconsistencies).

For example, review the order data recorded in Table 1-1. The customer information is repeated for each order a customer places (redundancy). Also, the city data in the last row is different from the first two rows.

Under these circumstances, it isn‚Äôt clear whether the last row actually represents a different customer, whether the previous customer had an address change, or whether the city information is incorrect (data anomaly).

To avoid these data issues, database normalization is used to create a design that reduces or eliminates data redundancy and, therefore, avoids data anomalies. In general, normalization helps database designers determine which attributes, or fields, belong to each entity. In turn, this information helps determine which fields belong in each table.

Normalization is a multistage process that enables designers to take the raw data to be collected about an entity and develop the data into a structured, normalized form that reduces the risks associated with data redundancy.

Data redundancy poses a special problem in databases because storing the same data in different places can cause problems when updates or changes to data are required. Most novices have difficulty understanding the impact of storing unnormalized data‚Äî data that hasn‚Äôt been designed by using a normalization process.

Here‚Äôs an example. Suppose you work for a large company and submit a change-of-address form to the Human Resources (HR) Department. If all the data HR stores is normalized, a data entry clerk needs to update only the EMPLOYEES master table with your new address.

However, if the data is not stored in a normalized format, the data entry clerk likely needs to enter the change in each table containing your address‚Äîthe EMPLOYEE RECORD table, the HEALTH INSURANCE table, the SICK LEAVE table, the ANNUAL TAX INFORMATION table, and so on‚Äîeven though all this data is stored in the same database.

As a result, if your mailing address is stored in several tables (or even duplicated in the same table) and the data entry clerk fails to make the change in one table, you might get a paycheck showing one address and, at the end of the year, have your W-2 form mailed to a different address! Storing data in a normalized format means only one update is required to reflect the new address, and it should always be the one that appears whenever your mailing address is needed.

- Determines required tables and columns for each table
- Multi-step process
- Used to reduce or control data redundancy
- Data redundancy ‚Äì refers to having the same data in different places within a database
- Data anomalies ‚Äì refers to data inconsistencies

![img](../../assets/images/singleTableApproachEx.png)

## Unnormalized Data

- Contains repeating groups in the Author column in the BOOKS table

![img](../../assets/images/unnormalizedData.png)

## First-Normal Form (1NF)

- Primary key is identified
- Repeating groups are eliminated
- ISBN and Author columns together create a composite primary key

### Composite Primary Key

- More than one column is required to uniquely identify a row
- Can lead to partial dependency ‚Äì a column is only dependent on a portion of the primary key

![img](../../assets/images/1NF.png)

## Second-Normal Form (2NF)

## Third-Normal Form (3NF)

<br>

# C.9 Demo

![img](../../assets/images/vetClinic.png)

UNF: Pet [pet_id, pet_name, pet_type, pet_age, owner, (visit_date, procedure_no, procedure_name)]

```
-- Week 09

-- 1NF
CREATE TABLE VETCLINIC_1NF
(
    PETID NUMBER(3) PRIMARY KEY,
    PETNAME VARCHAR2(20),
    PETTYPE VARCHAR2(20),
    PETAGE NUMBER(2),
    OWNER VARCHAR2(20),
    VISITDATE DATE,
    PROCEDURE VARCHAR2(50)
);

-- 2NF
CREATE TABLE APPOINTMENT_2NF
(
    APPOINTMENT_ID NUMBER(10),
    VISITDATE DATE,
    PETID NUMBER(3),
    CONSTRAINT PK_APPOINTMENT PRIMARY KEY (APPOINTMENT_ID),
    CONSTRAINT FK_APPOINTMENT_PET FOREIGN KEY (PETID) REFERENCES VETCLINIC_1NF (PETID)
);

-- 3NF
CREATE TABLE PROCEDURE_3NF
(
    PROCEDURE_ID NUMBER(10),
    PROCEDURE_NAME VARCHAR2(50),
    PETID NUMBER(3),
    CONSTRAINT PK_PROCEDURE PRIMARY KEY (PROCEDURE_ID),
    CONSTRAINT FK_PROCEDURE_PET FOREIGN KEY (PETID) REFERENCES VETCLINIC_1NF (PETID)
);

```

<br>

---

<br>

    üñãÔ∏è This is my self-taught blog! Feel free to let me know
    if there are some errors or wrong parts üòÜ

[Back to Top](#){: .btn .btn--primary }{: .align-right}
