---
title: "[Oracle-Sql] C.5 Constraints"

categories:
  - Oracle-Sql
tags:
  - [Constraints]

toc: true
toc_sticky: true

date: 2023-06-05
last_modified_at: 2023-06-28
---

<!-- {% capture notice-2 %}

üìã This is the tech-news archives to help me keep track of what I am interested in!

- Reference tech news link: <https://thenextweb.com/news/blockchain-development-tech-career>
  {% endcapture %}

<div class="notice--danger">{{ notice-2 | markdownify }}</div> -->

üìã This is my note-taking from what I learned in the class "Introduction To Database Concept"
{: .notice--danger}

<br>

# Constraints

- Rules used to enforce business rules, practices, and policies
- Rules used to ensure accuracy and integrity of data

<br>

# Constraint Types

| Constraints | Description                                                                                                                                                                                                                              |
| :---------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Primary Key | Determines which column(s) uniquely identifies each record. The primary key can't be NULL, and the data values must be unique.                                                                                                           |
| Foreign Key | In a one-to-many or parent-child relationship, the constraint is added to the "many" table. The constraint ensures that if a value is entered in a specific column, it must already exist in the "one" table, or the record isn't added. |
| Unique      | Ensures that all data values stored in a specified column are unique. The UNIQUE constraint differs from the PRIMARY KEY constraint in that it allows NULL values.                                                                       |
| Check       | Ensures that a specified condition is true before the data value is added to a table. For example, an order's ship data can't be earlier than its order date.                                                                            |
| Not Null    | Ensures that a specified column can't contain a NULL value. The NOT NULL constraint can be created only with the column-level approach to table creation.                                                                                |

## PK(Primary Key) - Characteristics

- Unique
- Not null
- Only one primary key in a table
- Value never change(Because it is unique)
- A primary key cannot exceed 16 columns and a total key length of 900 bytes
- API key is primary key
- Consistent

## FK(Foreign Key)

- Can have null values
- Can have duplicated values
- Create relationships

## Unique

- Can be null, but Cannot be duplicated

<br>

# Creating Constraints

- Use the optional CONSTRAINT keyword during creation to assign a name
- Let the server name the constraint using the default format SYS_Cn
- Informative names can assist in debugging

> When:
>
> - During table creation
> - After table creation, by modifying the existing table

> How:
>
> - Column level approach
> - Table level approach

## Creating Constraints at the Column Level

- If a constraint is being created at the column level, the constraint applies to the column specified.
- Column constraints are constraints attached to a single column.
- They are used to determine whether a proposed value for a column is valid or not.
- Column constraints are great for expressing requirements that are limited to a single field.

For instance, we could model the age restriction in a person table by adding a constraint after the column name and data type:

```
CREATE TABLE PERSON
(
  AGE INT CHECK (AGE >= 0)
);
```

## Creating Constraints at the Table Level

- Approach can be used to create any constraint type except NOT NULL
- Required if constraint is based on multiple columns
- Table constraints can express almost any restrictions that a column constraint can, but can additionally express restrictions that involve more than one column.
- Instead of being attached to a specific column, table constraints are defined as a separate component of the table and can reference any of the table's columns.

The column constraint we saw earlier could be expressed as a table constraint like this:

```
CREATE TABLE PERSON
(
  AGE INT,
  CHECK (AGE >= 0)
);
```

```
CREATE TABLE BORROW
(
  ACCOUNT_ID INT,
  ACCEPT BOOLEAN,
  CHECK (ACCOUNT_ID IS NOT NULL AND ACCEPT = TRUE)
);
```

{% capture notice-2 %}

üìã Column and Table Constraints

<https://www.prisma.io/dataguide/mysql/column-and-table-constraints>
{% endcapture %}

<div class="notice--danger">{{ notice-2 | markdownify }}</div>

### ‚òû Table Level

| Parent       |                       | Child        |
| :----------- | :-------------------- | :----------- |
| Customer     |                       | Orders       |
| PK Customer# | Referencing Customer# | PK Order id  |
|              |                       | FK Customer# |

First create parent table and then create child table &rarr; If you try to create child table first, you will get errors!

EX) In student table, Student#, Address, Email is primary key

<br>

# Constraints

```
SELECT * FROM orderitems;
SELECT * FROM user_constraints WHERE table_name='orderitems';

-- How many constraints are in orderitems table
SELECT COUNT(*) FROM user_constraints WHERE table_name='orderitems';
```

```
CREATE TABLE cars
  (
    VIN# NUMBER(10) PRIMARY KEY,
    MODEL VARCHAR2(10),
    PRICE NUMBER(10),
  );

SELECT * FROM user_constraints WHERE table_name='cars';

ALTER TABLE cars ADD CONSTRAINT cars_model_uk UNIQUE(MODEL); --> cars_model_uk is user-defined constraint!!

-- Add a color column and add a unique constraint
ALTER TABLE cars ADD (COLOR VARCHAR2(10));
ALTER TABLE cars ADD CONSTRAINT cars_color_uk UNIQUE(COLOR);

INSERT INTO cars VALUES(11111, 'BMW', 9000, 'WHITE');
INSERT INTO cars VALUES(22222, 'LEXUS', 9000, 'PEARL_WHITE');

SELECT * FROM cars;

-- Add a constraint for price column -> Price > 20000 is the condition
-- ALTER TABLE table_name CONSTRAINT constraint_name CHECK (check_condition);
ALTER TABLE cars ADD CONSTRAINT cars_price_uk CHECK (price > 20000);

-- Insert values to check the check constraints
INSERT INTO cars VALUES(44444, 'BENZ', 21000, 'BLUE'); --> 20000 for price is not allowed
SELECT * FROM cars;
```

<br>

---

<br>

    üñãÔ∏è This is my self-taught blog! Feel free to let me know
    if there are some errors or wrong parts üòÜ

[Back to Top](#){: .btn .btn--primary }{: .align-right}
