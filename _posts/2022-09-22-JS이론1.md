---
layout: single
title: "[JavaScript] JS 호이스팅"
categories: JavaScript
tags: [ JS, DeepDive]
toc: true

---

### 2022.09.22

### 💡  오늘의 JavaScript 공부 

#### ▶️ 호이스팅

변수 선언문이 코드의 선두로 <span style ='color:red'>끌어 올려진 것처럼</span>  동작하는 자바스크립트 고유의 특징을 변수 호이스팅 이라고 한다. 

자바스크립트는 함수가 실행되기 전 함수내의 필요한 변수값들을 모두 모아 유효범위 최상단에 선언한다.

##### 호이스팅의 대상 

var 변수/ 함수선언문에서만 호이스팅이 일어난다. 

let / const 변수 선언과 함수표현식에서는 호이스팅이 일어나지 않는다. 

##### why?

우선 이를 이해하기 위해서는 변수의 생성과정에 대해 이해해야 한다. 

변수는 3단계에 걸쳐 생성되는데 다음과 같이 나누어진다. 

1. 선언단계 

   변수를 실행 컨텍스트의 변수 객체에 등록한다. 

   이 변수 객첸느 스코프가 참조하는 대상이 된다. 

2. 초기화 단계

   변수 객체에 등록된 변수를 위한 공간을 메모리에 확보한다. 

   이 단계에서 변수는 undefined로 초기화 된다. 

3. 할당 단계 

   undefined로 초기화된 변수에 실제 값을 할당한다. 

var 키워드로 선언한 변수는 선언 단계와 초기화 단계가 한번에 이뤄진다. 즉, 스코프에 변수를 등록(선언 단계)하고 메모리에 변수를 위한 공간을 확보한 후, undefined로 초기화한다. 따라서 변수 선언문 이전에 변수에 접근하여도 스코프에 변수가 존재하기 때문에 에러가 발생하지 않는다. 다만 undefined를 반환한다. 이후 변수 할당문에 도달하면 비로소 값이 할당된다.

let 키워드로 선언된 변수는 선언 단계와 초기화 단계가 분리되어 진행된다. 즉, 스코프에 변수를 등록(선언 단계)하지만 초기화 단계는 변수 선언문에 도달했을 때(코드 실행 후) 이뤄진다. 초기화 이전에 변수에 접근하려고 하면 참조 에러가 발생한다. 이는 아직 변수가 초기화되지 않았기 때문이다. 즉, 변수를 위한 메모리 공간이 아직 확보되지 않았기 때문이다. 따라서 스코프의 시작 지점부터 초기화 시작 지점까지는 변수를 참조할 수 없다. 스코프의 시작 지점부터 초기화 시작 지점까지의 구간을 ‘일시적 사각지대(Temporal Dead Zone; TDZ)’라고 부른다.

##### 간단한 예시

```js
console.log(myname)    // undefined
console.log(myname2)   // ReferenceError

var myname = "kim se hoon"    // var변수
let myname2 = "kim se hoon2"  // let변수
------------------------------------------------
foo();       // "hello"     함수 선언문에서는 호이스팅이 일어난다. 
foo2();      // TypeError   함수 표현식에서는 호이스팅이 일어나지 않는다. 

function foo(){
  console.log("hello")    // 함수선언문
};
var foo2 = function(){
  console.log("hello2")   // 함수표현식
}
```

호이스팅은 함수선언문과 함수표현식에 서로 다르게 동작하기 때문에 주의해야 함.

##### 호이스팅 사용 시 주의할 점 

코드의 가독성과 유지보수를 위해 호이스팅이 일어나지 않도록 해야 한다. 

