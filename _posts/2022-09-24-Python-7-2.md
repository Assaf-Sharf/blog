---
layout: single
title:  "Python 7 - Pandas 2"
categories : Python
toc : true
---



여러가지 데이터를 handling 하는 과정

# Groupby

.

```python
df.groupby(묶음 기준 칼럼)[적용되는 칼럼].연산()

#ex)
df.groupby(["Team","year"])["Points"].sum()
```

.

groupby 추출

```python
grouped = df.groupby("Team")

for name, group in grouped:
  print(name)
  print(group)
```

tuple 형태로 그룹의 key, value값 추출됨

.

특정 key값 가진 그룹의 정보만 추출가능

```python
grouped.get_group
```

.

## groupby apply 3유형

### aggregation

요약된 통계정보를 추출해 줌

```python
grouped.agg(sum)

grouped.agg(np.mean)

grouped['points'].agg([np.sum,np.mean,np.std])
#전체 index마다 apply하는 함수
df.describe()
```

.

### transformation

해당 정보 변환해 줌

group 별로 연산할 때, 각각의 값에 영향을 줄 수 있게 한다.

```python
# 숫자 제곱하는 transform
score = lambda x: (x**2)
grouped.transform(score)
# group의 max값
score = lambda x: (x.max())
grouped.transform(score)
```

.

### filtration

특정 정보를 제거하여 보여줌 (검색할 때 사용)

```python
#그룹별로 3개 이상인 그룹만 나타내기
df.groupby('Team').filter(lambda x: len(x) >=3)
```

.

## hierarchical index

multi index에서 사용

```python
h_index.index

h_index["Devils":"kings"]

h_index.unstack()

h_index.reset_index()

```

.

index - swaplevel

```python
#index level 을 변경할 수 있음
h_index.swaplevel()

h_index.swaplevel().sortlevel(0)
```

.

sort

```python
#지정 index에 따라 sort 
h_index.sortlevel(1)

#value 에 따라 sort
h_index.sort_values
```

.

기본 연산 수행도 가능

```python
h_index.sum(level=1)
h_index.std(level=0)
```

.

