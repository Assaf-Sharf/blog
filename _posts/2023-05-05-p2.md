---
layout: single
title:  "Cooperative Intelligent Transportation System(C-ITS)"
toc: true
typora-root-url: ../
categories : Connected_Car
tag: [python, Softeer]
---

# Cooperative Intelligent Transportation System

[TOC]

## C-ITS (Cooperative Intelligent Transportation System)

C-ITS에 대해 이야기 하기 전에 **ITS(Intelligent Transport System)**에 대해 알아보도록 할게요.
'지능형 교통 시스템'이라 불리는 ITS는 교통과 관련된 시스템 전체를 말하는데, C-ITS는 ITS의 부분집합 정도로 설명할 수 있을 것 같아요. ITS의 예시로는 하이패스, 정류장 버스 도착 안내 시스템 등이 있습니다. 이름만 거창하지 사실 우리 생활에서 꽤 가까이 있는 시스템들이랍니다. 

**C-ITS(Cooperative Intelligent Transportation System)**는 기존 ITS에서 조금 더 세분화 된 시스템입니다. 결론부터 말하면 C-ITS는 차량 간 통신(V2V), 차량과 인프라 통신(V2I)을 의미하는데요. V2V**와 **V1I에 대해 조금 더 살펴보도록 할게요.

먼저 **V2V(Vehicle-to-Vehicle)**는 차량과 차량 간의 통신을 의미합니다. 예를들어 비 오는 날은 도로가 미끄러워서 브레이크 거리가 평소보다 길어지게 되는데요. 이 때 V2V 통신을 통해 앞차에서 미끄러운 도로 표면을 먼저 감지하고 뒷 차량과의 거리를 멀리 유지할 수 있도록 뒷차에 경고 데이터를 보낼 수 있어요.

**V2I(Vehicle-to-Infrastructure)**는 차량과 도로 인프라 간의 통신을 의미합니다. 예를 들면 신호등 정보를 차량이 미리 받아서 자동차가 도로에 멈춰 있는 시간을 줄여 빠른 속도로 이동할 수 있는 초록불 시간을 계산하여 운전자에게 안내해줄 수 있죠.

<img src="https://www.mdpi.com/sensors/sensors-22-01142/article_deploy/html/images/sensors-22-01142-g001.png" alt="Sensors | Free Full-Text | Connected Vehicles: V2V and V2I Road Weather and  Traffic Communication Using Cellular Technologies" style="zoom: 20%;" />

[^그림1]: Vehicular communication scenarios in an ITS

두 기술과 관련된 여러 시스템들을 찾아보면 둘이 비슷하면서 다른 것을 알 수 있습니다. 여러 다른 점 중 하나는 두 기술의 궁극적인 목표로 V2V는 교통 안전성 측면을 목표로 한다면 V2I는 교통 체계의 효율성을 목표로 한다는 것이죠.

결론적으로, C-ITS는 차량 간에 데이터 통신에 초점을 두고 있는 반면 ITS는 교통 시스템 전반의 기술을 포함하고 있다는 것이 가장 큰 차이점이라 말할 수 있겠네요.

C-ITS 분야에서 개인적으로 꽤 관심이 갔던 분야는 **'교통 신호 제어장치(Traffic Signal Control Device, TSC)'** 분야입니다. 앞선 포스팅에서도 언급했던 것처럼 아무리 자동차에 성능이 막강한 소프트웨어와 카메라, 라이다를 탑재한다고 해서 Level.5(운전자의 개입 없는 완전 자동화)를 달성할 수는 없는 것이 현실이죠. (물론 Level.5 달성을 위해서는 기술적인 부분 외에도 교통 관련 법규, 자율주행 차량의 신뢰도 등의 문제가 있지만 일단 이 글에서는 기술적인 부분에 대해서만 생각해 보겠습니다.) 

결국 기술적인 부분에서 Level.4,5로 도약하기 위해서는 C-ITS 구축이 필수이고 실제로 국내외 자동차 기업들 역시 해당 분야에 대한 투자를 아끼지 않고 있음을 쉽게 확인할 수 있어요. TSC와 관련되어 독일의 포르쉐(Porsche)는 **'Porsche Intelligent Intersection'** 라는 교통 신호 제어 기술을 개발하고 있는데요. 실시간으로 교통 상황을 감지하고 분석하는 센서를 사용하여 자율주행차들이 언제 신호를 받을지 예측하고, 그에 따라 교통 신호를 최적화하는 해당 기술은 현재 상용화를 위해 독일의 도시인 퓌키르헴(Fürth)에서 시범 운영 중인 것으로 알려져 있습니다. 



## RSU (Road Side Unit)

C-ITS와 관련되어 ["Connected Vehicle-Based Traffic Signal Control: A Comprehensive Survey and Future Directions" (2021)](https://www.mdpi.com/2071-1050/13/6/3189) 에서는 CV(Connected Vehicle)를 사용한 교통 신호 제어장치 관련 방법론으로 V2V, V2I 기술을 활용하는 방법을 설명하고 있어요.

[그림 1]에서 확인할 수 있듯이  V2I 기술을 활용한 TSC는 **RSU(Road Side Unit)**장치가 교차로 근처에 설치되며, 교통 신호 정보와 같은 도로 정보를 수집하고 처리합니다. 

사실 해당 논문을 살펴보면서 'V2I 기술이 이미 존재하는데 구지 도로에 RSU 장치를 추가적으로 설치해야 하나?' 라는 생각이 먼저 들었어요. 

V2I 기술은 차량과 인프라 간의 통신 기술을 의미한다고 위에서 언급했었죠. 맞아요. 해당 기술은 인프라 간의 통신을 통해 보다 정확하고 빠르게 교통 상황을 파악하고 대처할 수 있습니다. 하지만 V2I 기술만으로는 인프라와의 통신이 불안정해요. 예를들어 교차로 진입 시 신호 정보를 차량이 받지 못하는 상황이 온다면 이 경우에는 차량의 운전자가 신호를 직접 확인하고 판단해야겠죠. 하지만 V2I 기술만을 믿고 운전자가 주행에 집중하지 않고 있다면 어떻게 될까요? 기술에 100퍼센트의 안정성이 확인되지 않은 현 시점에서는 오히려 V2I 기술에만 의존하는 것이 운전자에겐 더 부담이 되겠죠? 그래서 이 부분을 보안하고자 등장한 기술이 RSU(Road Side Unit)인 거죠. 

그러면 RSU가 뭔지는 이제 알겠고, 그러면 대체 RSU는 어떻게 작동하는 건지에 대한 대답을 아래의 코드를 통해 간단하게 이해해 볼게요!

차량이 교차로에 진입해서 신호 정보를 받기 위한 상황을 가정해볼게요.  아래의 코드는 RSU에서 신호 정보를 보내고 차량에서 이를 받아 처리하는 예시 코드입니다. 같이 살펴볼게요.

RSU에서는 먼저 신호의 상태를 나타내는 'signalStatus'와 신호 제어 시간을 나타내는 'signalTiming' 변수를 정의합니다. 'signalStatus' 변수가 1이라면 GREEN, 0이라면 RED 신호를 보내고, 'signalTiming' 변수는 해당 신호가 유지되는 시간을 의미합니다.

```c++
// RSU에서 신호 정보를 보내는 코드
int signalStatus = 1; // 1: GREEN, 0: RED
int signalTiming = 60; // 신호 제어 시간 (초)
```



그리고 위에서 변수에 저장한 정보들을 'sendSignalInfo()' 함수를 이용해 교차로에 진입한 차량에 전송할게요.

```c++
sendSignalInfo(signalStatus, signalTiming);
```



이제 신호 정보를 받은 차량은 'getCurrentSpeed()' 함수를 통해 현재 차량의 속도를 구한 후, if 문 내에서 'isInIntersection()' 함수를 통해 현재 차량이 교차로에 진입 중인지 아닌지를 먼저 파악합니다.

만약 교차로에 진입 중이라면 'getSignalStatus()', 'getSignalTiming()' 함수를 통해 RSU에서 차량으로 전송된 신호 정보를 받아옵니다. 이 때 'signalStatus'와 'signalTiming' 변수는 새로운 값을 갖게 되고, 이를 분석해서 해당 차량이 속도를 조절하게 됩니다.

```c
// 차량에서 신호 정보를 받는 코드
int currentSpeed = getCurrentSpeed(); // 현재 차량 속도 (km/h)

if (isInIntersection()) { // 교차로에 진입 중인 경우
  int signalStatus = getSignalStatus(); // RSU로부터 신호 정보 받아옴
  int signalTiming = getSignalTiming();
```



맨 처음 'signalStatus'가 1이면 GREEN 신호라고 했죠. 신호는 초록불이 들어왔는데 만약 차량의 현재 속도가 최대 속도보다 느리면 'speedUp()' 함수를 통해 가속을 하고, 그렇지 않다면 'keepSpeed()' 함수를 통해 현재의 속도를 유지하게되요. 'signalTiming', 즉 초록 불의 지속 기간이 5초 이내로 떨어진다면 'slowDown()' 함수를 이용해서 차량은 빨강 불 신호를 예측하고 속도를 줄이게 됩니다.

```c
if (signalStatus == 1) { // GREEN 시그널인 경우
    if (currentSpeed < getMaxSpeed()) { // 최대 속도보다 느릴 경우
      speedUp(); // 가속
    }
    else {
      keepSpeed(); // 현재 속도 유지
    }
    if (signalTiming <= 5) { // 신호 제어 시간이 5초 이하인 경우
      slowDown(); // 감속
    }
  } 
```



반대로 교차로에 진입한 차량에게 RSU가  'signalStatus' == 0, 즉, RED 시그널을 알려준다면, 'slowDown()' 함수를 통해 감속하게 됩니다.

```c++
else { // RED 시그널인 경우
    slowDown(); // 감속
  }
}
```



지금까지 위에서 본 코드들은 차량이 교차로에 진입했다는 가정 하에 GREEN 시그널인지 RED 시그널인지에 따른 통신이였다면, 차량이 아예 교차로에 진입하지 않은 경우도 있겠죠. 이 때는 현재 속도를 유지하기 위해 'keepSpeed()' 함수를 통해 주행을 계속 이어나가게 됩니다.

```c#
else { // 교차로에 진입하지 않은 경우
  keepSpeed(); // 현재 속도 유지
}
```



어떠셨나요? RSU 인프라를 통해 차량이 신호를 예측하고, 곧 빨강 신호로 바뀔 것을 예상해서 속도를 줄여나간다는게 꽤 매력있지 않나요? 물론 위에서 살펴본 코드들로 교통신호제어장치 분야를 안다고 하기는 많이 부족하죠. (신호 처리 외에도 도로 상황에 따른 주행 영향도 있습니다!) 하지만 대체 어떻게 자율주행 차들이 인프라들과 통신하고 주행하는지는 이해할 수 있을 거라 생각해요. 

사실 불과 몇십년 전까지만 해도 자동차라는건 그저 잘 달리고 잘 멈추는게 전부였죠. 하지만 지금의 자동차들은 하나의 기계를 넘어서 소프트웨어까지 탑재되어 도로위의 컴퓨터라고 불리고 있어요. 이렇게 고성능 소프트웨어가 탑재된 신차들이 출시되고 있는 현재, 그럼에도 불구하고 제가 생각하기엔 **자동차는 역시 잘 달리고 잘 멈추는게 가장 중요한 부분**이라고 생각해요. 더군다나 운전자 없이 스스로 생각하고 스스로 주행하는 자율주행차는 더욱더 잘 달리고 잘 멈추는게 중요하다고 생각합니다.  그런 부분에서 C-ITS 분야는 저에게 있어 흥미로운 분야로 다가왔어요. 

아직까지 국내외를 포함해서 자율주행 인프라가 안정적으로 이루어진 곳은 없지만, 빠른 시일 내에 새로운 모빌리티 시대를 만나볼 수 있었으면 좋겠습니다 :)

![taycan2](/images/$[filename]/taycan2.jpeg)



## Reference.

[Softeer](https://softeer.ai/practice/info.do?idx=1&eid=580)

[현대오토에버, 자율주행의 기반을 만들다](https://softeer.ai/connect/softeerblog/detail.do?id=103)

[Towards a Smart & Sustainable Campus: An Application-Oriented Architecture to Streamline Digitization and Strengthen Sustainability in Academia](https://www.mdpi.com/2071-1050/13/6/3189)

[Connected Vehicles: V2V and V2I Road Weather and Traffic Communication Using Cellular Technologies](https://www.mdpi.com/1424-8220/22/3/1142)

