---
layout: single
published: true
title:  "9.데이터베이스와 JDBC"
categories : Jsp
tag : ["java","jsp"]
toc : true
toc_sticky: true
author_profile: true
sidebar :
    nav : "docs"
---

## 데이터베이스의 기초 학습과 실습



### H2 데이터 베이스란?

- 관계형 데이터베이스 관리 시스템
- MySQL과 달리 설치가 필요 없으며 소규모 프로젝트에서 사용됨
- 세 가지 모드로 운영이 가능하다.
- 임베디드 모드 : 데이터 파일만 있으면 동작하고 파일이 없다면 자동 생성하므로 언제든지 실행이 가능하여 톰캣이 실행된 상태에서는 데이터베이스 관리가 불가능하다.  파일을 사용하기 때문에 다중 접속이 불가능함 
- 인메모리 모드 : 데이터베이스를 메모리상에서만 운영하므로 처리 속도가 빠르지만 프로그램 종료시 데이터가 소멸됨
- 네트워크 서버 모드 : 네트워크 서버로 동작하는 방식이며 다중 접속이 가능하다. 별도의 프로그램 실행과 관리가 필요하기 때문에 데이터베이스 서버를 별도로 실행해야한다. 

- 자바로 구현되어 있기 때문에 데이터베이스를 실행하기 위해서는 자바가 설치되어있어야함.

H2설치

1.http://www.h2database.com/html/main.html에 들어가서 다운로드한다.

![h2_01](https://user-images.githubusercontent.com/68511112/154267278-7a946360-e8f5-4695-88e7-522b0b557c92.png)

2.설치가 완료되고 윈도우창에서 < h2 console > 앱을 실행한다.

3.컴퓨터 화면 오른쪽 아래에 있는 윈도우 트레이의 H2 아이콘에서 'Create a new database' 선택  

![h2_02](https://user-images.githubusercontent.com/68511112/154269653-b35ac7c7-8be3-43fa-ada5-24ef44f62182.jpg)



![h2_03](https://user-images.githubusercontent.com/68511112/154270678-a612e8b3-62fb-4b27-ab26-b2b167e07383.jpg)

4.테이터베이스 생성

![h2_04](https://user-images.githubusercontent.com/68511112/154271683-0fe54b79-eed8-483d-9180-754ef2f91fa7.jpg)

- Database path는 실제 데이터 파일이 생성되는 경로와 파일명이며 사용자의 홈디렉터리 아래에 'jwbookdb'로 시작하는 데이터 파일을 생성한다.

5.정상적으로 데이터베이스가 생성되었다면 h2 console 창으로 돌아와 연결 시험을 한다. '시험성공'이 뜬다면 '연결버튼을 누르고 메인 화면으로 이동한다.

![h2_05](https://user-images.githubusercontent.com/68511112/154273070-a6434097-acb3-4db0-b3eb-fa4a5324e85f.jpg)

## SQL 실습 : 학생정보 목록 생성

SQL을 이용해 데이터베이스를 사용하려면 SQL 클라이언트 프로그램이 필요하다.  H2 콘솔은 SQL 편집 기능을 제공한다. 



### DDL 

- 테이블의 생성,수정,삭제 기능을 제공하는 SQL문

1.테이블 생성 : CREATE TABLE

![h2_06](https://user-images.githubusercontent.com/68511112/154276823-88431d06-d775-43a5-b1bb-4f86245d7896.jpg)

``` 
CREATE TABLE student (
            id INT NOT NULL  PRIMARY  KEY  AUTO_INCREMENT,
            username VARCHAR(20),
            univ VARCHAR(40),
            birth DATE,
            email VARCHAR(40)
);
```

2.테이블 수정 : ALTER TABLE

- 테이블에 tel 칼럼 추가하고 반드시 데이터를 넣어야하는 칼럼으로 지정하기

  ```
  ALTER TABLE 테이블이름 ADD(tel VARCHAR(30)  NOT NULL);
  ```

- username의 크기를 20에서 10으로 조정하기

  ```
  ALTER TABLE 테이블이름 ALTER username VARCHAR(10);
  ```

- 기본키 제약 조건 제거하기.

  ```
  ALTER TABLE 테이블이름 DROP PRIMARY KEY;
  ```



3.테이블 삭제 : DROP TABLE

```
DROP TABLE 테이블이름;
```



4.테이블구조 : 확인하기

```
SHOW COLUMNS FROM 테이블이름;
```





<hr>

### DML

- 테이블의 데이터를 입력,수정,삭제,검색하기 위한 SQL문

1.데이터 추가 : INSERT 예시

```
INSERT INTO student(USERNAME ,UNIV,BIRTH,EMAIL ) VALUES ('김태희','ABC대학교','1995-01-01','KIM@AA.COM');
```

2.데이터 검색 : SELECT

전체 칼럼 검색

```
SELECT * FROM 테이블이름;
```

특정 칼럼 검색

```
SELECT 칼럼명1,칼럼명2 from 테이블이름;
```

where 조건절을 사용해 데이터 조회하기 예시

```
SELECT * FROM student WHERE username = '김태희';
SELECT * FROM student WHERE username = '김태희' OR UNIV = 'DDD대학교';
```

'송'으로 시작하는 데이터 찾기

```
SELECT * FROM student WHERE username LIKE '송%';
```





