---
layout: single
title: "localStorage"
categories: Problem_Solving
tag: [HTML, JavaScript]
toc: true
author_profile: false
sidebar:
  nav: "counts"
---

# 서버와의 통신 없이 ToDoList 구현하기

이번에는 **서버와의 통신 없이 할 일 목록을 관리하기 위한 기능**을 구현해보도록 하겠습니다

기능에 대해서 간단히 말하자면 주어진 HTML문서에 있는 요소들을 선택하고, 사용자 입력에 따라 서버와의 통신 없이 할 일을 추가 및 삭제 하는것을 구현해보고자 합니다.

## ToDoList 구현

### html Code

```html
...
  <form id="todo-form">
      <input type="text" placeholder="Write a To Do and Press Enter" />
    </form>
    <ul id="todo-list"></ul>
...
```

### JavaScript Code

```javascript
const toDoForm = document.getElementById("todo-form");
const toDoInput = toDoForm.querySelector("input");
const toDoList = document.getElementById("todo-list");

function paintToDo(newTodo) {
  const li = document.createElement("li");
  const span = document.createElement("span");
  li.appendChild(span);
  span.innerText = newTodo;
  toDoList.appendChild(li);
}

function handleToDoSubmit(event) {
  event.preventDefault();
  const newTodo = toDoInput.value;
  toDoInput.value = "";
  paintToDo(newTodo);
}

toDoForm.addEventListener("submit", handleToDoSubmit);

```

### 실행화면

<img src="/assets/images/local1.gif">

이 코드는 할 일 목록을 관리하는 간단한 기능을 구현한 예시입니다. 사용자가 할 일을 입력하고 제출하면 해당 할 일이 목록에 추가되는 동작을 수행합니다.

하지만 아직 기능이 부족해보입니다. 새로고침을 하면 할 일 목록들이 어딘가에 저장이 되지않아 초기화되고, 할 일 목록을 추가할 수는 있지만 삭제 기능이 없습니다. 

이제부터 하나하나 기능을 추가해보도록 하겠습니다.

## 삭제기능

먼저 삭제 기능을 추가하기위해서 기존코드에 있던 `function paintToDo(newTodo) { ... }`에 대해서 설명드리겠습니다.

- `paintToDo` 함수는 새로운 할 일을 화면에 그리는 역할을 합니다.
- `li` 변수는 새로운 `<li>` 요소를 생성합니다.
- `span` 변수는 새로운 `<span>` 요소를 생성합니다.
- `li.appendChild(span);`은 `li` 요소의 자식 요소로 `span` 요소를 추가합니다.
- `span.innerText = newTodo;`는 `span` 요소의 텍스트 내용으로 새로운 할 일(`newTodo`)을 설정합니다.
- `toDoList.appendChild(li);`는 `li` 요소를 `toDoList`에 추가합니다.

### html Code

```html
...
<ul id="todo-list">
    <li>
        <span></span>
    </li>
</ul>
...
```

paintToDo 함수가 실행이 된다면 이런 형식으로 부모 요소 `ul`에 `li`요소와 `li`요소의 자식 요소로 `span`이 추가될것입니다.

일단 삭제 버튼부터 추가해보겠습니다. 

### JavaScript Code

```javascript
function deleteToDo() {
    console.log("I will delete this");
}
function paintToDo(newTodo) {
  // const li = document.createElement("li");
  // const span = document.createElement("span");
  // span.innerText = newTodo;
  const button = document.createElement("button");
  button.innerText = "❌";
  button.addEventListener("click", deleteToDo);
  // li.appendChild(span);
  li.appendChild(button);
  // toDoList.appendChild(li);
}
// 주석 처리 부분은 기존 코드입니다.
```

`li` 요소의 자식 요소인 `span`요소에 형제 요소인 `button`을 추가해줍니다. 참고로 `li.appendChlid(button)`이 `li.appendChlid(span)`보다 앞으로 와서 삭제 버튼이 할 일 목록의 앞으로 오지 않도록 주의합니다. 

`button`이 Click 되면 `deleteToDo()`가 실행됩니다. 이벤트 리스너를 등록하고 콘솔로 테스트를 진행해보겠습니다. 

\<아직 삭제 기능은 구현되지 않은 상태입니다\>

<img src="/assets/images/local2.gif">

Click된 `li`요소를 선택해 삭제해야 하는데 어떤 `li`요소가 선택됐는지 구분할 수 없는 문제점이 발생하였습니다. 

`function deleteToDo()`에서 click 이벤트에 대해서 살펴보겠습니다.

```javascript
...
function deleteToDo(event) {
    console.log(event);
}
...
```

JavaScript의 이벤트(Event)객체는 일부 속성(properties)을 가지는데, 그 중 이벤트가 발생한 HTML 요소를 나타내는 `target` 속성이 있습니다.

`target` 속성은 일반적으로 이벤트가 발생한 요소를 가리키지만, 경우에 따라서는 실제 이벤트가 발생한 요소의 부모 요소를 참조하는 경우도 있습니다. 이때, `target` 속성을 통해 부모 요소에 접근하려면 `target` 속성의 `parentElement` 속성을 사용합니다. 이 점을 활용하여 다시 콘솔에 테스트 해보겠습니다.

```javascript
...
function deleteToDo(event) {
    console.log(event.target.parentElement);
}
...
```

<img src="/assets/images/local3.gif">

이제 제가 Click한 `button`의 부모 요소를 구분할 수 있습니다. 이는 곧 어떤 `li`요소가 선택됐는지 구분할 수 있다는 것입니다. 이제 저희는 어떤 `li`를 삭제해야할지 알게되었습니다. 

자 이제 위의 결과를 활용하여 function deleteToDo() 를 수정해보겠습니다.

```javascript
...
function deleteToDo(event) {
    const li = event.target.parentElement;
    li.remove();
}
...
```

<img src="/assets/images/local4.gif">