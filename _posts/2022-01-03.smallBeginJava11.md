---
layout: post
title: "자바11 새로 제작"
---

# 0. 프로젝트 아키텍쳐
아키텍쳐라기에는 오바지만... 대략적인 스펙  
<br>

Java 11  
Spring Boot 2.6.2  
Gradle  
MyBatis(JPA X 쿼리 많이 쓸거라) + xml  
Intellij  
Thymeleaf  

<br>

View - Controller - Service - ServiceImpl - Mapper - DB  
DTO는 db의 데이터가 mapper를 통해 객체화 된것을 저장 뒤 여기저기 다 넘겨줄 예정

<br>

# 1. 프로젝트 생성
![image](https://user-images.githubusercontent.com/86642180/147879657-30f772b8-7177-4f14-a323-ddc2f1486a13.png)

<br>
초반 의존성  
![image](https://user-images.githubusercontent.com/86642180/147879688-52d259de-c2d7-4e72-84e9-75c6bd643a50.png)  

<br>

# 2. build.gradle
gradle 프로젝트로 생성했다면 일일이 의존성, 플러그인 설정이 필요하지만  
spring boot 프로젝트로 이미 의존성 주입을 아까 다 했으니 할게 없다.  
나중에 필요한 의존성이 생길때마다 수시로 주입하면 된다.  
<br>
후에 필요한 작업이지만  
⭐github 공유 뒤 plug in에 intellij 추가해야함⭐ 매우 중요(이걸로 오늘 날렸다)  

# 3. application.properties
```
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://EndPoint/DB명
spring.datasource.username=admin
spring.datasource.password=RDS Password
```
https://aws.amazon.com/console/ 에서 RDS - DB정보에서 엔드포인트 복붙  

<br>
MyBatis를 위해 필요한 설정  
(1) camelCase : MyBatis 보다는 뭐 자바의 관행에 따르기 위해 필요  
지난번에 JPA로 테스트 겸 DB연결, 그레이들 파악을 했을 때  
pascal case로 입력한 컬럼 이름으로 헛갈렸다  
잊지말자 자바는 무조건 camel case다🐫  
`mybatis.configuration.map-underscore-to-camel-case=true` 추가  

<br>

(2) 매퍼 위치  
`com.project.smallBeginJava11.Mapper`에 매퍼 넣어줄 것이다.  
`mybatis.type-aliases-package=com.project.smallBegin.Java11.Mapper`를 추가  
<br>
작성하다보니 패키지 작성때 pascal case 쓴걸 발견했다...  
한 거 없으니 다시 생성 했다.  
![image](https://user-images.githubusercontent.com/86642180/147880433-efcc9aae-55cf-4cf3-8024-a15eef611431.png)

<br>
(3) 매핑할 모델 패키지 경로 : 나중에 매핑 타입에 패키지명 쓰면 너무 길어져서  
그리고 xml로 쿼리 다 작성할 것이므로 필요함  
`mybatis.mapper-locations=classpath:mybatis/mapper/**/*.xml`  

<br>

```
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://smallbegin.chcql9nk99vx.ap-northeast-2.rds.amazonaws.com:3306/small_begin
spring.datasource.username=admin
spring.datasource.password=smallbegin2021

# path for packaged model (to short mybatis type)
mybatis.type-aliases-package=com.project.smallBegin.Java11.Mapper

# mapper.xml location
mybatis.mapper-locations=classpath:mybatis/mapper/**/*.xml

# camel case
mybatis.configuration.map-underscore-to-camel-case=true
```

<br>

# 4. 패키지 생성  
mapper, mybatis 먼저 생성해준다.  
안그러면 application.properties 설정과 달라질 수 있으니  
까먹기 전에 얼른 동일하게 생성한다.  
거기에 controller, dto(domain), service, serviceImpl까지 생성한다.  
![image](https://user-images.githubusercontent.com/86642180/147881989-2838382e-5be7-4448-acf5-a417821512be.png)


<br>

# 5. DB연결 확인
이클립스에서는 코드 작성 뒤 view까지 가져오는 걸로 확인했으나  
인텔리제이는 우측 Database에서 연결 쉽게 할 수 있다.
![image](https://user-images.githubusercontent.com/86642180/147882099-a96c502f-d225-4d6b-84b1-3a9d1cc6b8e8.png)  
![image](https://user-images.githubusercontent.com/86642180/147882913-e389c7e9-6854-4ec0-9e41-0ad4b623a35e.png)  
MySQL 선택
![image](https://user-images.githubusercontent.com/86642180/147882882-1b449016-3979-4aae-87da-259b28719b4e.png)  
Name 👉 마음대로 입력  
Host 👉 엔드포인트 입력  
User 👉 rds 접속 시 user  
Password 👉 rds 접속 시 비밀번호  
Database 👉 스키마 명  
