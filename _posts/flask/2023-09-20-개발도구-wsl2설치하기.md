---
title:  "개발도구-wsl2 설치하기"
excerpt: " wsl2 ubuntu20.04 & docker "

categories:
  - Linux
tags:
  - [Linux, wsl2, ubuntu20.04, docker]

toc: true
toc_sticky: true

breadcrumbs: true
 
date: 2023-09-20
last_modified_at: 2023-09-20
---

# Windows용 Docker
- 개발환경설정
![image](https://github.com/OC-JSPark/oc-jspark.github.io/assets/46878973/1259b9b4-5026-4a54-8736-bd1b82e71b55)

## 1.Windows용 Ubuntu 설치
Microsoft Store에서 Ubuntu20.04.LTS 버전 설치

```
(PowerShell)
wslconfig.exe /u <name>
```

### 1-1. wsl 설치경로 지정
- 기본 설치 경로 
: C:\Users\hello\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu20.04LTS_79rhkp1fndgsc\LocalState\ext4.vhdx
  - VHDX파일은 리눅스가 설치된 가상 DISK이다.
- [MOVE-WSL](https://github.com/pxlrbt/move-wsl/tree/sayak/pre-checks)
: 자동으로 wsl 설치경로 지정해주는 opensource

```
(PowerShell)
.\move-wsl.bat Ubuntu-20.04 C:\src\wsl2
```

### 1-2. wsl 용량확장
- [WSL 디크스 공간 관리방법](https://learn.microsoft.com/ko-kr/windows/wsl/disk-space)
VHD용량을 1000GB로 확장하는 Windows PowerShell 실행명령어(관리자모드에서 실행!)

```
(PowerShell)
wsl --shutdown
Get-AppxPackage -Name "*Ubuntu*" | Select PackageFamilyName
diskpart
Select vdisk file=C:\src\wsl2\ext4.vhdx
detail vdisk
expand vdisk maximum=1000000
exit
```

## WSL(Windows Subsystem for Linux)
MS에서 제공하는 Windows에서 리눅스 커널을 사용할 수 있게 해주는 기술.

[WSL 기본명령어](https://learn.microsoft.com/ko-kr/windows/wsl/basic-commands)

```
(PowerShell)
wsl -l -v
wsl --install
wsl --set-default <distribution name>
``` 
  - wsl 설치된 list보기
  - wsl 설치
  - 기본 Linux 배포판 설정

일반계정 로그인하고자 한다면
```
(Ubuntu)
# vi /etc/wsl.conf
[user]
default=jspark

(PowerShell)
wsl -t Ubuntu-20.04
```
  - wsl의 리눅스 셧다운하고 재실행

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}
 
## WSL용 GPU 드라이버 설치
[WSL용 Nvidia GPU Driver 설치](https://wikidocs.net/209659)

```
# pin 추가
$ wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin
$ sudo mv cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600

# cuda 패키지 다운로드 및 등록
$ wget https://developer.download.nvidia.com/compute/cuda/11.7.0/local_installers/cuda-repo-wsl-ubuntu-11-7-local_11.7.0-1_amd64.deb
# 설치 후 키 추가 명령어 실행할 것
$ sudo dpkg -i cuda-repo-wsl-ubuntu-11-7-local_11.7.0-1_amd64.deb

# 패키지 저장소 업데이트
$ sudo apt-get update

# cuda 설치
$ sudo apt install nvidia-cuda-toolkit
```
