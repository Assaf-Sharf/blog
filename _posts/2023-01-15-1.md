# 2023-01-15-1

# javascript ajax object 그룹핑

---
layout: single
title:  "javascript ajax object group"
---

문제 - 쿼리에서 partition by 함수와 정렬 사용해 가지고 온 result object를 이차원 배열로 만든 코드

![322827359_952706432382270_1731744262870794837_n.png](2023-01-15-1%202b0e0c09bf434b8b8fac8f520bad8a67/322827359_952706432382270_1731744262870794837_n.png)

  

```jsx
setMainMagazineList : function(object){
	
	var list = object.mainSharp.list; // ajax의 result
	var index = 0;
	var ctgMagGroup = {};

	if(list != undefined && list.length > 0) {
		/*매거진 카테고리 별 그룹핑 */
		var magcd = ctgMagGroup[index] == undefiend ? "" : ctgMagGroup[index][0].v_categorycd;
		if(magcd == o.v_categorycd) {
			ctgMagGroup[index].push(o);
		}else{
			index++;
			ctgMagGroup[index] = [0];
		}
	}
}
```

결과

![319185571_1259063644823978_8143187421905596790_n.png](2023-01-15-1%202b0e0c09bf434b8b8fac8f520bad8a67/319185571_1259063644823978_8143187421905596790_n.png)

### 다른 방법이 있을까?

javascript 함수 array.reduce 

- array.reduce()는 주어진 콜백 함수를 실행 시킨 값을 누적 해서 하나의 결과값으로 리턴한다.
- initialValue는 누적 초기값으로 필수 요소가 아니다.

| 파라미터 | 설명 |
| --- | --- |
| acc | 누적값 |
| currentIdx | 현재 원소의 인덱스 |
| array | 원본 배열 |

```jsx
const result = list.reduce((acc, list) => {  
  const { v_categorycd } = curr.v_categorycd;                       
  if (acc[v_categorycd]) acc[v_categorycd].push(list); 
  else acc[v_categorycd] = [list];              
  return acc;                           
}, {});                                 
```

이 또한 categorycd를 기준으로 그룹핑 한 return 값을 받을 수 있다.

라이브러리를 사용(core.js)해서 객체를 더 편하게 그룹핑 할 수 있으나 javascript의 내장 함수가 아니기 때문에 pass